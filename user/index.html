<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="generator" content="Asciidoctor 2.0.10">
<link rel="icon" type="image/x-icon" href="images/logo.ico">
<title>BDeploy End User Documentation</title>
<link rel="stylesheet" href="./plain.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
<script src="js/jquery-3.4.1.min.js"></script>
<script src="js/lightgallery-all.min.js"></script>
<script type="text/javascript">
    $(document).ready(function() {
        $("#content").lightGallery({
            mode: 'lg-fade',
            share: false,
            thumbnail: false,
            hideBarsDelay: 1000,
            selector: '.image'
        });
    });
</script>
</head>
<body class="article toc2 toc-left">
<div id="header">
<h1>BDeploy End User Documentation</h1>
<div class="details">
<span id="revnumber">version 2.5.0</span>
</div>
<div id="toc" class="toc2">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_introduction">Introduction</a>
<ul class="sectlevel2">
<li><a href="#_key_features">Key Features</a></li>
<li><a href="#_terms">Terms</a></li>
</ul>
</li>
<li><a href="#_installation">Installation</a>
<ul class="sectlevel2">
<li><a href="#_download">Download</a></li>
<li><a href="#_update_of_existing_installations">Update of existing Installations</a></li>
<li><a href="#_master">Master</a></li>
<li><a href="#_custom_certificate">Custom Certificate</a></li>
<li><a href="#_slave">Slave</a></li>
<li><a href="#_service">Service</a></li>
<li><a href="#_verify_setup">Verify Setup</a></li>
</ul>
</li>
<li><a href="#_getting_started">Getting Started</a>
<ul class="sectlevel2">
<li><a href="#_login">Login</a></li>
<li><a href="#_instance_group">Instance Group</a></li>
<li><a href="#_instance_overview">Instance Overview</a></li>
<li><a href="#_deployment">Deployment</a></li>
<li><a href="#_process_control">Process Control</a></li>
<li><a href="#_client_applications">Client Applications</a></li>
<li><a href="#_centralmanaged_specific_configuration">Central/Managed Specific Configuration</a></li>
</ul>
</li>
<li><a href="#_tutorials">Tutorials</a>
<ul class="sectlevel2">
<li><a href="#_how_can_i_change_a_process_configuration">How can I change a process configuration?</a></li>
<li><a href="#_how_can_i_see_whats_up_and_running">How can I see what&#8217;s up and running?</a></li>
<li><a href="#_how_can_i_deploy_a_new_product_version">How can I deploy a new product version?</a></li>
</ul>
</li>
<li><a href="#_advanced_usage">Advanced Usage</a>
<ul class="sectlevel2">
<li><a href="#_advanced_terms">Advanced Terms</a></li>
<li><a href="#_integration_of_a_new_product">Integration of a new product</a></li>
<li><a href="#_building_a_product">Building a Product</a></li>
<li><a href="#_variable_expansion">Variable Expansion</a></li>
<li><a href="#_runtime_dependencies">Runtime Dependencies</a></li>
<li><a href="#_runtime_dependency_packaging">Runtime Dependency Packaging</a></li>
<li><a href="#_software_repositories">Software Repositories</a></li>
</ul>
</li>
<li><a href="#_experts">Experts</a>
<ul class="sectlevel2">
<li><a href="#_administration">Administration</a></li>
<li><a href="#_command_line_interface">Command Line Interface</a></li>
<li><a href="#_security">Security</a></li>
<li><a href="#_endpoint_proxying">Endpoint Proxying</a></li>
</ul>
</li>
<li><a href="#_faq">FAQ</a></li>
</ul>
</div>
</div>
<div id="content">
<div id="preamble">
<div class="sectionbody">
<div class="imageblock text-center">
<div class="content">
<img src="images/logo.svg" alt="Logo" width="200">
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_introduction">Introduction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>BDeploy is a fast, reliable and configurable deployment solution for any type of application. It features an easy to use and flexible user interface on top of a distributed storage.</p>
</div>
<div class="sect2">
<h3 id="_key_features">Key Features</h3>
<div class="dlist">
<dl>
<dt class="hdlist1">Angular UI</dt>
<dd>
<p>The Angular-based Web UI provides all means for easy configuration and deployment of your products and applications.</p>
</dd>
<dt class="hdlist1">Powerful Storage</dt>
<dd>
<p>The storage backend provides data de-duplication in a high performance, distributed, delta-based storage network.</p>
</dd>
<dt class="hdlist1">Performance</dt>
<dd>
<p>BDeploy uses a delta-transfer mechanics to provide minimal updates throughout a whole network of nodes participating in deployments.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Visit the official homepage <a href="https://bdeploy.io" class="bare">https://bdeploy.io</a> to get the latest release as well as more information about all features that make BDeploy unique.</p>
</div>
</div>
<div class="sect2">
<h3 id="_terms">Terms</h3>
<div class="paragraph">
<p>BDeploy has a some important terms and concepts which should be known before diving into details of the application itself. These terms will be used all over the documentation to cross-reference other parts of the application.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Instance Group</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An <strong>Instance Group</strong> is the main top-level element used in <strong>BDeploy</strong>. It provides a grouping of <strong>Instances</strong> (as the name suggests).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Product</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A piece of software that can be deployed with <strong>BDeploy</strong>. A product is a bundle of <strong>Applications</strong> along with some meta-information.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Application</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A part of a <strong>Product</strong> that can be started and stopped separately. Applications either run as <strong>Process</strong> on a server machine or as <strong>Client Application</strong> on a desktop computer.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Client Application</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An <strong>Application</strong> that can be distributed on desktop computers.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Instance</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An <strong>Instance</strong> is the actual deployment configuration of a <strong>Product</strong>. In one instance, the <strong>Applications</strong> of a <strong>Product</strong> can be distributed as <strong>Processes</strong> on one or more <strong>Nodes</strong>.</p>
<p class="tableblock">The <strong>Product</strong> (and it&#8217;s <strong>Applications</strong>) describes the <em>possible</em> configuration values (e.g. configuration files, command line parameters, etc.) - the <strong>Instance</strong> provides <em>actual</em> values for these.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Instance Version</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An <strong>Instance Version</strong> describes the configuration state of an <strong>Instance</strong> at a given time. Each change that is done by the user results in a new instance version. Versions are immutable and cannot be changed. Each new change results in a new version of an <strong>Instance</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Process</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A server <strong>Application</strong> that is configured to be started on one of the server <strong>Nodes</strong> of an <strong>Instance</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Build</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <strong>Build</strong> represents the immutable collection of all runtime artifacts   (binary files, configuration files, templates etc.) of a <strong>Product</strong>. As a <strong>Build</strong> is immutable, the build tool (Maven, Gradle, Eclipse) creates a new one on every execution.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Product Version</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <strong>Product Version</strong> represents a <strong>Build</strong> that is marked with a <strong>Tag</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Tag</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <strong>Tag</strong> identifies a <strong>Product Version</strong>. The structure of a tag is defined by the <strong>Product</strong> itself. The only obligation is, that a tag has to be unique for different <strong>Builds</strong> of the same <strong>Product</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Node</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A server machine (virtual machine or bare metal) that is used in an <strong>Instance</strong> to run the configured <strong>Processes</strong> on it. <strong>BDeploy</strong> supports Windows and Linux nodes, even mixed in one instance.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Minion</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Agent process provided by <strong>BDeploy</strong> that has to run on every <strong>Node</strong> used by BDeploy. In a multi-node setup one minion takes the role of a master. All other nodes act as slaves which are managed by the master.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Deployment</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The whole process of making one <strong>Instance Version</strong> up and running. This includes the major process steps: <strong>Installation</strong>, <strong>Activation</strong>, <strong>Process Control</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Installation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The process of transferring the configured <strong>Processes</strong> of an <strong>Instance Version</strong> to all <strong>Nodes</strong> of that <strong>Instance</strong>. The <strong>Installation</strong> makes this <strong>Instance Version</strong> available for its <strong>Activation</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Activation</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>Activation</strong> marks an previously <strong>Installed</strong> <strong>Instance Version</strong> as the one to be started by the <strong>Process Control</strong>. Only one instance version can be active for one instance at the same time.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Process Control</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>Process Control</strong> is responsible for starting, keep-alive and stopping the <strong>Processes</strong> of the active <strong>Instance Version</strong>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_installation">Installation</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter guides you through the installation of BDeploy. At the end you will have the backend and the frontend up and running
so that you can start deploying your applications.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The source distribution of BDeploy contains a demo server that can be started with <em>./gradlew runDemoServer</em>. The example data is reinitialized with each server start.
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="_download">Download</h3>
<div class="paragraph">
<p>The latest and greatest BDeploy version can be downloaded on the official Github page: <a href="https://github.com/bdeployteam/bdeploy/releases" class="bare">https://github.com/bdeployteam/bdeploy/releases</a></p>
</div>
<div class="paragraph">
<p>Extract the BDeploy binaries from the distribution ZIP. There is no requirement regarding the location of the binaries.
The target of the unpack will contain a <em>bin/bdeploy</em> or <em>bin/bdeploy.bat</em> depending on whether the distribution is
built for linux (e.g. <em>bdeploy-linux64-x.x.x.zip</em>) or windows (e.g. <em>bdeploy-win64-x.x.x.zip</em>).</p>
</div>
<div class="paragraph">
<p>For easier handling, make sure the unzipped 'bin' folder is on the PATH. The rest of the manual assumes you have done
this, otherwise simply prefix all commands with the correct path to the binaries.</p>
</div>
</div>
<div class="sect2">
<h3 id="_update_of_existing_installations">Update of existing Installations</h3>
<div class="paragraph">
<p>In case you already have an existing installation of <strong>BDeploy</strong>, you can easily update this installation. An update can be performed in two different ways: through the command line (even remotely) or through the Web UI.</p>
</div>
<div class="paragraph">
<p>For more information about the Web UI, please see <a href="#_bdeploy_update">BDeploy Update</a>.</p>
</div>
<div class="paragraph">
<p>To remotely update an existing server, use a command similar to the following:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">bdeploy login --login --name=MyServer --remote=https://host:port/api
bdeploy remote-master --update=&lt;path-to-update.zip&gt; --useLogin=MyServer</pre>
</div>
</div>
<div class="paragraph">
<p>Updating a local server is through the command line is done in the same way.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Existing slaves don&#8217;t need a separate update. They need to be online when applying the update to the master. The update is applied to all online slaves as well when applying it to the master.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_master">Master</h3>
<div class="sect3">
<h4 id="_modes_of_operation">Modes of Operation</h4>
<div class="paragraph">
<p><strong>BDeploy</strong> may be set up in different modes, makeing a few different overal usage scenarios possible:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>STANDALONE</code> mode: A standalone <strong>BDeploy</strong> master which is responsible for itself, its slaves, and every application deployed theron.</p>
</li>
<li>
<p><code>MANAGED</code> mode: A <strong>BDeploy</strong> master which is controlled by a <code>CENTRAL</code> <strong>BDeploy</strong> master. The <code>MANAGED</code> master can still be used nearly the same as the <code>STANDALONE</code> master, with very few restrictions. A <code>MANAGED</code> master can <strong>additionally</strong> be controlled indirectly through the attached <code>CENTRAL</code> master</p>
</li>
<li>
<p><code>CENTRAL</code> mode: Allows a central <strong>BDeploy</strong> master to control/manage multiple <code>MANAGED</code> masters. The <code>CENTRAL</code> master itself has no local deployment capabilities, but <em>just</em> the ability to control other masters. Other than that, from a users perspective, the server handles mostly like a <code>STANDALONE</code> or <code>MANAGED</code> master directly.</p>
</li>
<li>
<p><code>SLAVE</code> mode: A slave which can be attached to either a <code>STANDALONE</code> or <code>MANAGED</code> server as additional node to run applications on.</p>
</li>
</ul>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/Scenario_Standalone.svg"><img src="images/Scenario_Standalone.svg" alt="STANDALONE Deployment Scenario" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Compared to the rather straight forward standalone scenario above, a <code>CENTRAL</code> and <code>MANAGED</code> server setup, allows for more flixibility, manageable through a single Web UI:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/Scenario_Central_Managed.svg"><img src="images/Scenario_Central_Managed.svg" alt="CENTRAL/MANAGED Deployment Scenario" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can still manage every <code>MANAGED</code> server directly through its own Web UI. Creation of new <strong>Instance Groups</strong> is restricted to the <code>CENTRAL</code> Web UI though.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><strong>BDeploy</strong>'s <code>CENTRAL</code> mode is built in a way that attached <code>MANAGED</code> servers can have an alternate URL, allowing it to manage servers which are known under a different name in the local network (e.g. VPN/NAT, alternate DNS, etc.).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
See <a href="#_centralmanaged_specific_configuration">Central/Managed Specific Configuration</a> for more details.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_initialization">Initialization</h4>
<div class="paragraph">
<p>To start using BDeploy you will at least need a single <strong>master</strong>. The <strong>master</strong> needs to be initialized before it can be started.</p>
</div>
<div class="paragraph">
<p>The <strong>root directory</strong> contains all the runtime data. Best to select an empty directory in the data area of your system
(e.g. /var/bdeploy on Unix) that is intended exclusively for this purpose. Keep the root directory separate from the BDeploy
binary installation. Make sure that there is enough space available.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">bdeploy init --root=/path/to/storage --hostname=&lt;hostname&gt; --mode=STANDALONE --port=7701 --initUser=username --initPassword=usersPassword</pre>
</div>
</div>
<div class="paragraph">
<p>The <code>init</code> command will create the initial administrator user from the <code>--initUser</code> and <code>--initPassword</code> parameters. This user has full administrative privileges. You can use the <code>bdeploy login</code> command to authorize all other CLI commands for your user.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Don&#8217;t use the depicted user and password, these are just samples.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>init</code> command will write an administrator access token to a file if given with <code>--tokenFile</code>. This tokens main purpose is automation (scripting) and testing.</p>
</div>
<div class="paragraph">
<p>The <code>--mode</code> parameter of the <code>init</code> command is used to determine the future purpose of the <strong>BDeploy</strong> root. The mode can be <code>STANDALONE</code>, <code>MANAGED</code>, <code>CENTRAL</code> (or <code>SLAVE</code> - see <a href="#_slave">Slave</a>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is not recommended (<a href="#_migrating_between_modes">but possible</a>) to change the mode of an initialized root later, so take care to use the correct mode for the intended use.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The result of the <code>init</code> command is a <strong>root directory</strong> which can be used by the <strong>master</strong> or <strong>slave</strong> commands.</p>
</div>
</div>
<div class="sect3">
<h4 id="_launch">Launch</h4>
<div class="paragraph">
<p>After the initialization - which needs to be done only once - the <strong>master</strong> can be started with the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">bdeploy master --root=/path/to/storage</pre>
</div>
</div>
<div class="paragraph">
<p>This will start the <strong>master</strong> server which also hosts the web UI: <a href="https://localhost:7701" class="bare">https://localhost:7701</a></p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The server is using a self-signed certificate by default. Thus you need to instruct your browser to accept it. See <a href="#_custom_certificate">Custom Certificate</a> for instructions on how to provide a better certificate.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_user">User</h4>
<div class="paragraph">
<p>Only authenticated users have access to the web UI. The initial user has been created by the <code>init</code> command. Use this user to log in to the Web UI, and create additional users (or provide external authentication mechanisms) from the <a href="#_user_accounts">User Accounts</a> administration page.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_custom_certificate">Custom Certificate</h3>
<div class="paragraph">
<p>By default <strong>BDeploy</strong> uses a self signed certificate for both TLS (HTTPS) traffic encryption as well as token issuing. Tokens can be issued on the command line and from the User menu in the Web UI. These tokens are used to authenticate and authorize any actions performed remotely (command line, third party software, Web UI, etc.).</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
By changing the certificate <strong>BDeploy</strong> uses, all existing tokens will lose their validity.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>You can use the <code>certificate</code> tool to switch to another ceritificate:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">bdeploy certificate --update=&lt;path-to-pem&gt; --root=&lt;path-to-root&gt;</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_slave">Slave</h3>
<div class="paragraph">
<p>Slaves are optional and only required in case that the application that you want to deploy should run on different servers but be managed from a certain master. By default a master is itself a slave as well where applications can be deployed to.</p>
</div>
<div class="sect3">
<h4 id="_initializing">Initializing</h4>
<div class="paragraph">
<p>Slaves must be initialized on the according machines (or on the same machine using non-default ports; the default port is 7701).
The command is the same as the one used to initialize the master. Pass (for example) <code>--port=7702</code> to change the
default port to some other value to avoid conflicts. Running multiple bdeploy minions on the same machine is
supported for testing, but not recommended for productive setups (as the master can be deployed to directly anyway - no need for an explicit slave).</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">bdeploy init --root=/path/to/slave/storage --hostname=&lt;hostname&gt; --tokenFile=token.txt --port=7702</pre>
</div>
</div>
<div class="paragraph">
<p>Again, the init command will output the root access token for this slave. You need it to register the slave with the
master, so keep it around or use <code>--tokenFile=slave.txt</code> to store the token into a file.</p>
</div>
</div>
<div class="sect3">
<h4 id="_launch_2">Launch</h4>
<div class="paragraph">
<p>After the initialization - which needs to be done only once - the slave can be started with the following command:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">bdeploy slave --root=/path/to/storage</pre>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_registration">Registration</h4>
<div class="paragraph">
<p>To register a slave with the master use this command on the master&#8217;s root:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">bdeploy slave --add=slave-name --root=/path/to/master/storage --remote=https://slave-host:7702/api --tokenFile=slave.txt</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Both the <code>https</code> (beware the <code>s</code>) and the <code>/api</code> suffix are required!
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The slave is now registered as 'slave-name'. This is the name which is reported when querying nodes from the master.
This is also the name displayed when configuring applications to run on certain nodes later on.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_service">Service</h3>
<div class="sect3">
<h4 id="_linux_service_systemd">Linux Service (SYSTEMD)</h4>
<div class="paragraph">
<p>The <code>bdeploy-linux64-x.x.x.zip</code> package contains a template file from which a systemd service can be created. It is
located in the <code>etc</code> directory and named <code>bdeploy-minion.service</code>.</p>
</div>
<div class="paragraph">
<p>The template itself contains instructions on how to create a valid service from it.</p>
</div>
<div class="paragraph">
<p>You can copy the service template to a different filename while installing into the systemd service directory. The
filename will later on be the service name. This allows to install multiple bdeploy master/slave services on a single
machine.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
To get systemd to recognize the service(s) after copying the service file(s) use the <code>systemctl daemon-reload</code> command (as root).
Once installed, you can control the service using <code>systemctl</code>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_windows_service">Windows Service</h4>
<div class="paragraph">
<p>The <code>bdeploy-win64-x.x.x.zip</code> package contains a batch script to create a new Windows service. The script is located in
the <code>etc</code> directory and is named <code>bdeploy-service-install.bat</code></p>
</div>
<div class="paragraph">
<p>The script must be called with administrative privileges and it expects the following arguments:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">--master | --slave     Start a master or slave node
&lt;Path-to-minion&gt;       Absolute path of the bdeploy executable
&lt;Path-to-store-files&gt;  Absolute path of the data directory</pre>
</div>
</div>
<div class="paragraph">
<p>By default the service runs as <em>Local System</em> but you can and should change that afterwards by using the services.msc
application. Simply configure the desired account in the <em>Log On</em> tab of the services management console.</p>
</div>
<div class="paragraph">
<p>Once installed, you can start the service using services.msc or by calling <code>net start BDeployMaster | BDeploySlave</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Use the <em>Event Viewer</em> (Windows Logs&#8594;System) to get more information when the service fails to start.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Application logs (stdout, stderror) are written to a log file that is stored in <code>&lt;path-to-store-files&gt;\log\service.log</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The service parameters are stored in the Windows registry: <code>HKLM\SYSTEM\CurrentControlSet\Services\BDeployMaster</code>
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You need to adopt the batch script when you want to create multiple services on the same machine. Simply adopt the
<code>MINION_SERVICE_PREFIX</code> to use another prefix for the service.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_verify_setup">Verify Setup</h3>
<div class="paragraph">
<p>Make sure that all master and slave services are running on the according nodes by starting the created services or by starting them manually.
To verify that the setup is OK, run on the master:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">bdeploy login --add=MyServer --remote=https://localhost:7701/api
bdeploy remote-master --minions</pre>
</div>
</div>
<div class="paragraph">
<p>This will provide output like this:</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">NAME                 STATUS                       START OS         VERSION
master               ONLINE            1/21/19, 4:43 PM LINUX      1.0.0.e32e
slave                OFFLINE</pre>
</div>
</div>
<div class="paragraph">
<p>If any of the nodes is marked offline, the according minion on the respective node is not reachable from the master node.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<code>bdeploy login</code> will prompt for user and password, create a local session, and use that session on subsequent commands. This login session will keep validity until removed using e.g. <code>bdeploy login --remove=MyServer</code>.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_getting_started">Getting Started</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter provides an overview of all parts of the BDeploy user interface.</p>
</div>
<div class="sect2">
<h3 id="_login">Login</h3>
<div class="paragraph">
<p>Each user needs to authenticate with a username and password in order to get access to all parts of the system. An anonymous access is not available.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Login.png"><img src="images/BDeploy_Login.png" alt="BDeploy Login" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>After a successful login the main page is shown with all <strong>Instance Groups</strong> that the user is permitted to see.</p>
</div>
<div class="paragraph">
<p>Clicking on the hamburger menu in the top-left corner provides access to the various other parts of the system.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Main_Menu.png"><img src="images/BDeploy_Main_Menu.png" alt="BDeploy Main Menu" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Clicking on the user menu in the top-right corner provides access to various user related actions and information.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_User_Menu.png"><img src="images/BDeploy_User_Menu.png" alt="BDeploy User Menu" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Users which are authenticated against an external system (e.g. LDAP) are not able to edit their user information (including password) through the user menu. Updates have to be performed on the controlling system (e.g. LDAP server) in this case.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_instance_group">Instance Group</h3>
<div class="paragraph">
<p>An <strong>Instance Group</strong> acts as logical container for actual <strong>Instances</strong>. It typically contains several <strong>Instances</strong> for different purposes (productive, test, development). Adding them to the same group provides a better overview which of them are belonging together. An empty page is displayed if no instance has been created.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Empty_IG.png"><img src="images/BDeploy_Empty_IG.png" alt="Empty Instance Group Overview" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Use the <b class="button">+</b> button to create a new <strong>Instance Group</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Create_IG.png"><img src="images/BDeploy_Create_IG.png" alt="Create Instance Group" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The name of an instance group cannot be changed. Be carful when choosing the name.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <em>Automatic Cleanup</em> option helps to reduce the amount of consumed hard disk space. During the lifetime of an <strong>Instance Group</strong>, probably many new versions of a <strong>Product</strong> are deployed. To avoid that the hard disk is filled up with <strong>Product Versions</strong> that are not used anymore, there is an option to activate an automatic cleanup job. If the option <em>Automatic Cleanup</em> is enabled, old <strong>Product Versions</strong> that are no longer in use by <strong>Instances</strong> of this <strong>Instance Group</strong> are deleted automatically. To avoid that a <strong>Product</strong> vanishes completely, the very latest <strong>Product Version</strong> always remains.</p>
</div>
<div class="sect3">
<h4 id="_instance_group_access">Instance Group Access</h4>
<div class="paragraph">
<p>A new <strong>Instance Group</strong> is initially only visible to users with global read permission (or higher).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Demo_Permissions_Global.png"><img src="images/BDeploy_Demo_Permissions_Global.png" alt="Global Instance Group Permissions" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Use the <b class="button">+</b> button to add a user to the list. The input field suggests matching users from the list of all users.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Demo_Permissions_AddUser1.png"><img src="images/BDeploy_Demo_Permissions_AddUser1.png" alt="Grant Read Access to an Instance Group" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Adding a user grants read access to the <strong>Instance Group</strong>. The bin icon in the last column removes the user from the list. Users with global read permission cannot be removed.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Demo_Permissions_AddUser2.png"><img src="images/BDeploy_Demo_Permissions_AddUser2.png" alt="Grant Read Access to an Instance Group" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Write access and administration permissions for an <strong>Instance Group</strong> can be granted and revoked using the checkbox in the respective column.</p>
</div>
</div>
<div class="sect3">
<h4 id="_instance_group_dialog">Instance Group Dialog</h4>
<div class="paragraph">
<p>All <strong>Instance Groups</strong> that are visible to the user are shown in the <strong>Instance Groups</strong> dialog. This page shows a list of <em>recently used</em> <strong>Instance Groups</strong> in the first row. It will always contain the most recently used <strong>Instance Groups</strong> for the logged in user. This allows allows a quick return to previously/frequently visited <strong>Instance Groups</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Demo_IG.png"><img src="images/BDeploy_Demo_IG.png" alt="Demo Instance Group" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Of course you can also bookmark the location of an <strong>Instance Group</strong> in your browser.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_initial_steps">Initial Steps</h4>
<div class="paragraph">
<p>Click on an <strong>Instance Group</strong> to open the <strong>Instance Browser</strong> of this group. Here you can see all <strong>Instances</strong> grouped by their <em>purpose</em> (can be <code>DEVELOPMENT</code>, <code>TEST</code>, <code>PRODUCTIVE</code>)</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Empty_Instances.png"><img src="images/BDeploy_Empty_Instances.png" alt="Empty Instance Browser" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Since an <strong>Instance</strong> requires a <strong>Product</strong>, an empty <strong>Instance Group</strong> will display a shortcut to the <a href="#_manage_products">Manage Products</a> dialog. If there is at least one <strong>Instance</strong> already, the shortcut disappears. The <span class="menuseq"><b class="menu">Context Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Products</b></span> menu opens the <a href="#_manage_products">Manage Products</a> dialog, too.</p>
</div>
</div>
<div class="sect3">
<h4 id="_manage_products">Manage Products</h4>
<div class="paragraph">
<p>Click the <b class="button">+</b> button to upload new <strong>Products</strong>. <strong>Products</strong> can be obtained by <a href="#_building_a_product">building a <strong>Product</strong></a> or by downloading an existing version from another <strong>Instance Group</strong> on the same or another <strong>BDeploy</strong> server, using the <b class="button">Download</b> button on the <strong>Product</strong> details panel.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
On the BDeploy Releases page you will find some sample products for each release, see <a href="https://github.com/bdeployteam/bdeploy/releases" class="bare">https://github.com/bdeployteam/bdeploy/releases</a>
</td>
</tr>
</table>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Empty_Products.png"><img src="images/BDeploy_Empty_Products.png" alt="Empty Products Page" width="480"></a>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Upload_Before.png"><img src="images/BDeploy_Product_Upload_Before.png" alt="Upload Product(s)" width="480"></a>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Upload_Success.png"><img src="images/BDeploy_Product_Upload_Success.png" alt="Upload Product(s) (success)" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Once a <strong>Product</strong> is available, you can click it to open the <strong>Product</strong> details panel. This panel allows you to <b class="button">Download</b> a <strong>Product</strong> version as <em>ZIP</em>, or <b class="button">Delete</b> individual versions of the <strong>Product</strong> as long as it is not currently required by an <strong>Instance</strong> version. The <b class="button">Info</b> popup provides a list of all tags on that <strong>Product</strong> version.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Products.png"><img src="images/BDeploy_Products.png" alt="Products Page" width="480"></a>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Products_Details.png"><img src="images/BDeploy_Products_Details.png" alt="Product Details" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_create_new_instances">Create New Instances</h4>
<div class="paragraph">
<p>To create a new <strong>Instance</strong>, click the <b class="button">+</b> button at the bottom of the page. After giving the new <strong>Instance</strong> a name, purpose and description, the most important thing is to select the <strong>Product</strong> you want to deploy. Additionally, The initial <strong>Product Version</strong> has to be chosen. It can be changed later at anytime (<em>up-</em> and <em>downgrade</em>).</p>
</div>
<div class="paragraph">
<p>It is a common requirement that certain <strong>Processes</strong> of an <strong>Instance</strong> should be automatically started whenever the <strong>BDeploy</strong> server itself is started. To accomplish that, the <em>Automatic Startup</em> flag of the <strong>Instance</strong> must be set.</p>
</div>
<div class="paragraph">
<p>The <strong>Instance</strong> determines whether it is included in the automatic cleanup job. If the option <em>Automatic Uninstallation</em> is enabled, the cleanup job will uninstall all <strong>Instance Versions</strong> that are older than the activated and the previously activated <strong>Instance Version</strong>. Due to this automatic uninstallation some of the old <strong>Product Versions</strong> might become unused. If the option <em>Automatic Cleanup</em> is activated on the instance group, these unused <strong>Product Versions</strong> are deleted too (see <a href="#_instance_group">Instance Group</a>).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Create.png"><img src="images/BDeploy_Instance_Create.png" alt="Create a new Instance" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Click an <strong>Instance</strong> to proceed to the <a href="#_instance_overview">Instance Overview</a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_List.png"><img src="images/BDeploy_Instance_List.png" alt="Instance Browser" width="480"></a>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_instance_overview">Instance Overview</h3>
<div class="paragraph">
<p>The <strong>Instance Overview</strong> is the central dialog for configuring and managing instances. It provides an overview about all configured <strong>Applications</strong> and on which nodes they are running. Each <strong>Application</strong> is represented by a <strong>Process Card</strong>. Colored markings on the card indicate whether a process still lacks mandatory configurations or whether there are still unsaved changes.</p>
</div>
<div class="paragraph">
<p>The first step is to select the desired applications from the <strong>Configure Applications</strong> panel distribute them to the <strong>Nodes</strong> in the <strong>Instance</strong> using drag and drop. The panel is called up via the pull-down menu of the dialog. The applications that are shown in this panel are defined by the <strong>Product</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Menu.png"><img src="images/BDeploy_Instance_Menu.png" alt="Instance Menu" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The <strong>Configure Applications</strong> panel contains all server applications and all client applications of the product. Server applications can be dragged to <strong>Server Nodes</strong> (e.g. <em>master</em>), client applications can only be dragged to the (virtual) <strong>Client Applications Node</strong>. Clients that are available for more than one operating system expand to single cards per operating system on the <strong>Client Node</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Client Application Node</strong> is not available if the product does not contain any client applications.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_process_settings">Process Settings</h4>
<div class="paragraph">
<p>A <strong>Process</strong> is started by executing the <strong>Start</strong> command that is defined by the <strong>Application</strong>. The parameters that are passed to the <strong>Process</strong> are configured in the <strong>Process Settings</strong> dialog. This dialog can be accessed via the pull-down menu on the respective <strong>Process Card</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_DnD_Applications.png"><img src="images/BDeploy_DnD_Applications.png" alt="Drag &amp; Drop Applications" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The available parameters, their type and whether or not they are mandatory or optional are defined by the <strong>Application</strong>. The dialog groups the available parameters into categories, between which you can jump back and forth via <b class="button">Previous</b> and <b class="button">Next</b>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Config.png"><img src="images/BDeploy_Process_Config.png" alt="Process Parameter Configuration" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Application</strong> defines in which order the parameters are passed to the <strong>Process</strong> this order cannot be changed for predefined parameters.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Behind each parameter there is a small popup that can contain a short description, a <strong>Default Value</strong> and a button for resetting the parameter to the <strong>Default Value</strong>.</p>
</div>
<div class="paragraph">
<p><strong>Validation Issues</strong> are displayed per group in the respective title. Only complete configurations can be accepted.</p>
</div>
<div class="paragraph">
<p>The context menu on an application card allows you to copy an application definition. This can be pasted on any node of the correct type using the context menu on the according node when in <strong>Configure Applications</strong> mode.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Paste_Application.png"><img src="images/BDeploy_Paste_Application.png" alt="Paste Application" width="480"></a>
</div>
</div>
<div class="sect4">
<h5 id="_optional_parameters">Optional Parameters</h5>
<div class="paragraph">
<p><strong>Optional Parameters</strong> can be selected for each group using the <b class="button">Manage Optional Parameters</b> dialog (available only if <strong>Optional Parameters</strong> are available) and then configured like other parameters.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Optional_Parameters.png"><img src="images/BDeploy_Process_Optional_Parameters.png" alt="Manage Optional Parameter(s)" width="480"></a>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Optional_Configured.png"><img src="images/BDeploy_Process_Optional_Configured.png" alt="Configuring Optional Parameter(s)" width="480"></a>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_custom_parameters">Custom Parameters</h5>
<div class="paragraph">
<p><strong>Custom Parameters</strong> can be maintained in the last parameter group. Because all <strong>Parameters</strong> must have a determined sequence, <strong>Custom Parameters</strong> must define a predecessor parameter after which they are put on the command line.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Custom_Create.png"><img src="images/BDeploy_Process_Custom_Create.png" alt="Create Custom Parameter" width="480"></a>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Custom_Value.png"><img src="images/BDeploy_Process_Custom_Value.png" alt="Configure Custom Parameter" width="480"></a>
</div>
</div>
</div>
<div class="sect4">
<h5 id="_global_parameters">Global Parameters</h5>
<div class="paragraph">
<p><strong>Global Parameters</strong> are valid for all <strong>Processes</strong> of an <strong>Instance</strong>. They are also configured in the <strong>Process</strong>, but changes are copied to all other processes that also use this parameter. <strong>Global Parameters</strong> are matched by their parameter UID, and marked with a small globe in the <strong>Process Configuration</strong> dialog.</p>
</div>
</div>
<div class="sect4">
<h5 id="_variables">Variables</h5>
<div class="paragraph">
<p><strong>BDeploy</strong> provides a mechanism for defining that a parameter should hold a dynamically computed value instead of a fixed one. The general syntax for variables is <code>{{TYPE:VARNAME:SUBVAR}}</code>. With that mechanism it is possible to define that a certain parameter holds different values for different operating systems or to refer to parameters defined in a different process. See <a href="#_variable_expansion">Variable Expansion</a> for more details.</p>
</div>
</div>
<div class="sect4">
<h5 id="_command_line_preview">Command Line Preview</h5>
<div class="paragraph">
<p>A preview of the command that is executed to launch this process can be viewed by clicking on the <b class="button">Show Command Line Preview</b> button that is displayed at the right side of the <strong>Parameter Settings</strong> header. The preview is especially useful in case of custom parameters to ensure that they are added as expected in the correct order.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Custom_Preview.png"><img src="images/BDeploy_Process_Custom_Preview.png" alt="Preview Command Line with Custom Parameter" width="480"></a>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_configuration_files">Configuration Files</h4>
<div class="paragraph">
<p>The <strong>Configuration Files</strong> of all <strong>Processes</strong> of an <strong>Instance</strong> are maintained together in one dialog. It can be opened by clicking on the <b class="button">Configuration Files</b> button in the pull-down menu of the <strong>Instance</strong>. The initial set of <strong>Configuration Files</strong> is derived from the default set delivered with the product, see <a href="#_product_info_yaml"><code>product-info.yaml</code></a>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_CfgFiles_Browser.png"><img src="images/BDeploy_CfgFiles_Browser.png" alt="Configuration File Browser" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>New configuration files can be be created using the <b class="button">+</b> button. This will open the integrated editor.
Additionally to that existing files can be uploaded using the provided <b class="button">Upload</b> button.</p>
</div>
<div class="sect4">
<h5 id="_file_types">File types</h5>
<div class="paragraph">
<p>The type of a configuration file is automatically detected and visualized in the dialog. The following table shows the supported file types and how they are treated:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 8.3333%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 16.6667%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-center valign-top">Type</th>
<th class="tableblock halign-left valign-top">Online Editing</th>
<th class="tableblock halign-left valign-top">Variable Expansion</th>
<th class="tableblock halign-left valign-top">Encoding</th>
<th class="tableblock halign-left valign-top">Samples</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<img src="images/BDeploy_CfgFiles_Text.png" alt="BDeploy CfgFiles Text" width="32">
</div>
</div>
<div class="paragraph">
<p>Text</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Can</strong> be edited online using the integrated editor.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Variables used in the file content are replaced. See <a href="#_variable_expansion">Variable Expansion</a> for more details.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files are always written using UTF-8 encoding.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">txt, log, xml, csv</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<img src="images/BDeploy_CfgFiles_Binary.png" alt="BDeploy CfgFiles Binary" width="32">
</div>
</div>
<div class="paragraph">
<p>Binary</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Cannot</strong> be edited online.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Not available.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Files are written as they are without any modifications.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">zip, pdf</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_editor">Editor</h5>
<div class="paragraph">
<p>The integrated editor provides syntax highlighting and rudimentary syntax checking for some basic file types (yaml, json, xml). Displayed problems are only to be seen as help and never interfere with the process, e.g. by preventing the saving of a file. Only files of type <strong>Text</strong> can be edited with the provided editor. <strong>Binary</strong> files can only be changed by uploading a new file with the same name.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_CfgFile_New.png"><img src="images/BDeploy_CfgFile_New.png" alt="Create New Configuration File" width="480"></a>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_CfgFiles_Save.png"><img src="images/BDeploy_CfgFiles_Save.png" alt="Modified Configuration Files" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Changes done in configuration files must be <strong>Saved</strong> and they result in a new <strong>Instance Version</strong> that must be <strong>Installed</strong> and <strong>Activated</strong> so that the changes have an impact.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_change_product_version">Change Product Version</h4>
<div class="paragraph">
<p><strong>Instances</strong> are based on a <strong>Product Version</strong>. While the <strong>Product</strong> of the <strong>Instance</strong> cannot be changed afterwards, the <strong>Version</strong> can be chosen from the available <strong>Product Versions</strong> (upgrade to a newer version / downgrade to an older version).</p>
</div>
<div class="paragraph">
<p>If there&#8217;s a newer <strong>Product Version</strong> available (newer than the one that is configured for the latest <strong>Instance Version</strong>), a notification is shown in the notification area.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Notification.png"><img src="images/BDeploy_Product_Notification.png" alt="Notification about new Product Version" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Clicking on the notification opens the <strong>Product Version</strong> sidebar. The same sidebar can also be opened opened by clicking on the <b class="button">Change Product Version</b> button in the pull-down menu of the <strong>Instance</strong>. If the menu entry is disabled verify that the latest <strong>Instance Version</strong> is selected.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Change.png"><img src="images/BDeploy_Product_Change.png" alt="Change Current Product Version" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The <b class="button">Info</b> Popup provides a list of all Labels on that <strong>Product</strong> version.</p>
</div>
<div class="paragraph">
<p>Changing the version can be done by clicking on the <b class="button">Upgrade</b> or <b class="button">Downgrade</b> button displayed at the right side of the product version card. Selecting another product version will automatically close the <strong>Product Version</strong> sidebar. The <strong>Instance Version</strong> sidebar is displayed and a new locally modified version has been created.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Upgrade_Local_Changes.png"><img src="images/BDeploy_Product_Upgrade_Local_Changes.png" alt="Successful Product Tag Change" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
All <strong>Applications</strong> are marked as modified as they are now based on a different <strong>Product Version</strong>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Changing the <strong>Product Version</strong> can result in validation issues and automated adjustment of parameters. <strong>Product Versions</strong> can contain different <strong>Applications</strong>, so that with the change of the <strong>Product Version</strong> e.g. a previously configured <strong>Application</strong> must be deleted because it has been removed from the product. If parameters definitions are changed, validation errors may occur which must be corrected before saving (e.g. new mandatory parameters, parameters no longer supported, etc.). These errors will cause a visual indicator on affected applications, as well as a textual description of the problem in the notifications area.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Downgrade_Validation.png"><img src="images/BDeploy_Product_Downgrade_Validation.png" alt="Validation Issues After Product Version Change" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_importexport">Import/Export</h4>
<div class="paragraph">
<p>Instance versions can be exported and downloaded from the <strong>Instance Version</strong> card&#8217;s context menu. This will download this specific instance version&#8217;s raw data as a <em>ZIP</em>. This <em>ZIP</em> will contain the complete instance configuration as well as all configuration files currently stored with the instance.</p>
</div>
<div class="paragraph">
<p>The content of the <em>ZIP</em> can be edited offline, and re-imported using the <strong>Instance</strong>'s (not <strong>Instance Version</strong>) context menu to create a new <strong>Instance Version</strong>. The file structure inside the <em>ZIP</em> must be exactly the same as when exporting.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
This mechanism allows access to the most internal data structures of <strong>BDeploy</strong>. Great care has to be taken to not damage any of the data on import.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_application_templates">Application Templates</h4>
<div class="paragraph">
<p>A product may contain <strong>Application Templates</strong>. These are pre-defined configurations for applications, resulting in a more complete process configuration when dragged to the target node. If an application has an attached <strong>Application Template</strong>, it&#8217;s application card will contain a drop down (<em>Choose Application Template</em>), which - when clicked - will show all available templates to choose from.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Application_Template_Choose.png"><img src="images/BDeploy_Application_Template_Choose.png" alt="Application Template Drop Down" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>After choosing a template, dragging the card to the target node as usual will create the process configuration from this template instead of starting from scratch. In case the template requires user input (i.e. it defines mandatory template variables), the user is prompted to fill them out before the process is created.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Application_Template_Variables.png"><img src="images/BDeploy_Application_Template_Variables.png" alt="Application Template Variables" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Finally, the process configuration is created from the application template using the given variable values.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You will notice that the name of the process now matches the name of the template, not the name of the underlying application.
</td>
</tr>
</table>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Application_Template_Process.png"><img src="images/BDeploy_Application_Template_Process.png" alt="Application Template Process" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_instance_templates">Instance Templates</h4>
<div class="paragraph">
<p>A product can define and include <strong>Instance Templates</strong>. These templates can be applied on an empty instance (e.g. after creating one). They can define processes just like <strong>Application Templates</strong>, in fact they can even include existing <strong>Application Templates</strong>.</p>
</div>
<div class="paragraph">
<p>The advantage of an <strong>Instance Template</strong> is that it can contain more knowledge of how processes need to be set up to work together, wheras <strong>Application Templates</strong> define configuration for a single application.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Template_Empty.png"><img src="images/BDeploy_Instance_Template_Empty.png" alt="Instance Template on empty instance" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The <strong>Instance Template</strong> link is only available if the product contains templates to start from. Clicking it will open up the <strong>Instance Template</strong> wizard.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Template_Dialog_Groups.png"><img src="images/BDeploy_Instance_Template_Dialog_Groups.png" alt="Instance Template Dialog Group Selection" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Selecting a template (here: <em>Default Configuration</em>) will show a list of <em>groups</em> defined in the template. These <em>groups</em> can be assigned to compatible nodes - groups containing server applications to server nodes, and groups containing client applications to the special <em>Client Applications</em> node. Selecting <em>None</em> as target node will skip the processes in this group. Click the (i) info icon to display details about a group, including all processes configured in the template group.</p>
</div>
<div class="paragraph">
<p>When creating configurations on a <code>SERVER</code> node, applications will be added matching the nodes OS. If a server application is included in a group which is not available for the target OS, it is ignored.</p>
</div>
<div class="paragraph">
<p>When creating configurations for a <code>CLIENT</code> group, applications are added to the <em>Client Applications</em> virtual node, one for each OS supported by the application.</p>
</div>
<div class="paragraph">
<p>Clicking <b class="button">Next</b> will show a list of template variables to fill out. Template variables can be used by templates to query required user input, so all template variables are mandatory.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Template_Dialog_Variables.png"><img src="images/BDeploy_Instance_Template_Dialog_Variables.png" alt="Instance Template Dialog Variables" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Clicking <b class="button">Next</b> and then <b class="button">Close</b> once the template has been applied will create the processes defined in the template. The configuration will <strong>not</strong> be saved automatically, to allow further tuning of the configuration before doing so.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Template_Processes.png"><img src="images/BDeploy_Instance_Template_Processes.png" alt="Instance Template Dialog Variables" width="480"></a>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_deployment">Deployment</h3>
<div class="paragraph">
<p>The process of making one <strong>Instance Version</strong> up and running is called <strong>Deployment</strong>. This includes the steps <strong>Installation</strong>, <strong>Activation</strong> and <strong>Process Control</strong></p>
</div>
<div class="sect3">
<h4 id="_installation_2">Installation</h4>
<div class="paragraph">
<p>All available <strong>Instance Versions</strong> can be installed via the action <b class="button">Install</b>. Clicking on that button will transfer all files that the application requires to the configured target nodes. More specific that means the applications are extracted from the internal storage that <strong>BDeploy</strong> is using and written to the hard disk.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Version_Menu.png"><img src="images/BDeploy_Instance_Version_Menu.png" alt="Instance Version Context Menu" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Installed versions occupy additional disk space on the target node. Applications are installed in a shared <strong>Pool</strong> directory on the target node. Thus multiple different <strong>Processes</strong> referring to the same <strong>Application</strong> are written only once to the hard disk. This minimizes the required disk space and leads to faster <strong>Installation</strong> times as only the first <strong>Process</strong> needs to be be written to the hard disk.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Version_Installed.png"><img src="images/BDeploy_Instance_Version_Installed.png" alt="Installed Instance Version" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Whether a version is already installed is indicated by an icon on the <strong>Version Card</strong> to the left of the <strong>Product Version</strong>. Versions that are no longer needed can be uninstalled using the <b class="button">Uninstall</b> action. Uninstalling deletes the files written to the file system during installation. The version remains available and can be reinstalled at any time.</p>
</div>
</div>
<div class="sect3">
<h4 id="_activation">Activation</h4>
<div class="paragraph">
<p>One of the installed <strong>Instance Versions</strong> can be marked as <em>active</em> with the action <b class="button">Activate</b>. The <strong>Process Control</strong> always refers to the <em>active</em> version. Versions that are just installed cannot be started. Only <strong>Processes</strong> from the <strong>Active</strong> version can be started.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Instance_Version_Activated.png"><img src="images/BDeploy_Instance_Version_Activated.png" alt="Activated Instance Version" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Marking a desired version as <em>active</em> does not require to stop all running <strong>Processes</strong>. A warning message is displayed when processes from <em>non-active</em> versions are still running. They can be manually stopped if desired and then started from the currently active version.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_process_control">Process Control</h3>
<div class="paragraph">
<p>For the activated <strong>Instance Version</strong>, the <strong>Process Control</strong> of this <strong>Process</strong> can be displayed by clicking on a <strong>Process Card</strong>. The upper part of the <strong>Process Control Sidebar</strong> shows the current <strong>Process Status</strong>. Below this, the control elements for <em>starting</em>, <em>stopping</em> or <em>restarting</em> the process can be found.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Started.png"><img src="images/BDeploy_Process_Started.png" alt="Running Server Process" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>In addition to the actions for individual processes, the pull-down menu of the dialog contains the actions for <em>starting</em>, <em>stopping</em> or <em>restarting</em> the entire <strong>Instance</strong>, i.e. all <strong>Processes</strong> configured with start type <code>INSTANCE</code>.</p>
</div>
<div class="sect3">
<h4 id="_process_status">Process Status</h4>
<div class="paragraph">
<p>The process status is visualized with an icon in the bottom right corner of each <strong>Process Card</strong> and on the <strong>Process Control Sidebar</strong>. The <strong>Instance Version</strong> card displays the cumulated status of all <strong>Processes</strong> running in this version. A <strong>Process</strong> can have one of the following states:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Icon</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process is <strong>stopped</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<img src="images/BDeploy_Process_Status_Running.png" alt="BDeploy Process Status Running" width="32">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process is <strong>running</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<img src="images/BDeploy_Process_Status_Running_Stop_Planned.png" alt="BDeploy Process Status Running Stop Planned" width="32">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process is <strong>running</strong> but <strong>stopping</strong> has been <strong>requested</strong> by the user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<img src="images/BDeploy_Process_Status_Running_Version.png" alt="BDeploy Process Status Running Version" width="32">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process is <strong>running</strong> in another version.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<img src="images/BDeploy_Process_Status_Crashed_Temporary.png" alt="BDeploy Process Status Crashed Temporary" width="32">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process <strong>crashed</strong> unexpectedly. <strong>Process Control</strong> scheduled an automatic restart. No interaction required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<img src="images/BDeploy_Process_Status_Crashed.png" alt="BDeploy Process Status Crashed" width="32">
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process <strong>crashed</strong> unexpectedly. <strong>Process Control</strong> gave up restarting as the last 5 attempts failed. <strong>Manual interaction required</strong>.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The life cycle of a process is visualized in the following state graph:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_State_Graph.png"><img src="images/BDeploy_Process_State_Graph.png" alt="Process State Graph" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_process_outdated">Process Outdated</h4>
<div class="paragraph">
<p>An warning message - <strong>Outdated</strong> - is displayed whenever one or more <strong>Processes</strong> are running in a version that is currently not <strong>Activated</strong>. This happens when <strong>Deploying</strong> a new version while <strong>Processes</strong> are still running.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Out_Of_Sync.png"><img src="images/BDeploy_Process_Out_Of_Sync.png" alt="BDeploy Process Out Of Sync" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>In principle this is nothing to worry about. It is just a remainder that the configuration has changed. The <strong>Processes</strong> will remain running in their current version until they are actively restarted. The message cannot be confirmed / closed as it automatically disappear once all <strong>Processes</strong> are running in the <strong>Activated</strong> version.</p>
</div>
</div>
<div class="sect3">
<h4 id="_process_start_type">Process Start Type</h4>
<div class="paragraph">
<p>The <strong>Start Type</strong> of a <strong>Process</strong> can be configured in the <strong>Process Configuration</strong> dialog. The available options are depending on the <strong>Application</strong>. That means the publisher of an <strong>Application</strong> defines which <strong>Start Types</strong> are supported. The following types are available:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Name</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MANUAL</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process must be started manually. No automatic startup will be done.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>MANUAL_CONFIRM</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process must be started manually and an additional confirmation is required.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>INSTANCE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Process will be started automatically <strong>if</strong> the <em>Automatic Startup</em> flag of the <strong>Instance</strong> is set.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>It is a common requirement that certain <strong>Processes</strong> of an <strong>Instance</strong> should be automatically started whenever the <strong>BDeploy</strong> server itself is started. To accomplish that, the <em>Automatic Startup</em> flag of the <strong>Instance</strong> must be set. This can be done in the <strong>Instance Configuration</strong> dialog. Additionally the <strong>Start Type</strong> of the <strong>Process</strong> must set to <strong>Instance</strong>. This can be done in the <strong>Process Configuration</strong> dialog.</p>
</div>
<div class="paragraph">
<p><strong>Processes</strong> that are executing actions that cannot be reverted or that are potentially dangerous in productive environments (dropping a database, deleting files) should be configured with the start type <code>MANUAL_CONFIRM</code>. Doing that results in an additional popup dialog that enforces the user to enter the name of the <strong>Process</strong> before it is started. The idea is, that the user takes an additional moment to ensure that he is really starting the desired <strong>Process</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Manual_Confirm.png"><img src="images/BDeploy_Process_Manual_Confirm.png" alt="Manual Confirmation On Startup" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_startup_and_shutdown_order">Startup and Shutdown Order</h4>
<div class="paragraph">
<p>The <strong>Process Control</strong> starts the processes in the order as they are defined in the <strong>Process Configuration</strong> dialog. That means the order can be influenced by dragging applications around. When <strong>Start Instance</strong> is invoked then all processes with startup type <strong>Instance</strong> are started in the defined order. When <strong>Stop Instance</strong> is invoked then all running processes are stopped sequentially. The order is reversed during the stop operation. That means the last process is stopped first and the first process is stopped at last. The next process is stopped when the previous is terminated.</p>
</div>
</div>
<div class="sect3">
<h4 id="_keep_alive">Keep Alive</h4>
<div class="paragraph">
<p>If the <strong>Keep Alive</strong> flag for a <strong>Process</strong> is configured then the <strong>Process Control</strong> restarts it when it crashes unexpectedly. The first restart attempt is immediately executed after the process terminates. Subsequent attempts are delayed. That means the <strong>Process Control</strong> waits a given time period until the next start attempt is executed. Such a situation is visualized in the UI with a red-warning icon where normally the green heart is displayed.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Crashed.png"><img src="images/BDeploy_Process_Crashed.png" alt="Crashed Server Process (temporarily)" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The <strong>Process Control</strong> will give up restarting a process after a total of 5 unsuccessful restart attempts. Such a situation is visualized in the UI with a red error icon. This icon means that the user has to manually check why it is failing and restart it if desired.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Crashed_Repeatedly.png"><img src="images/BDeploy_Process_Crashed_Repeatedly.png" alt="Crashed Server Process (permanently)" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_view_stdout_stderr">View stdout / stderr</h4>
<div class="paragraph">
<p>Clicking on the terminal icon displayed below the process control actions will open a live stream of the <strong>stdout</strong> as well as <strong>stderr</strong> stream of the running <strong>Process</strong>. This allows a quick health check to ensure that everything is as expected.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_Output.png"><img src="images/BDeploy_Process_Output.png" alt="Show and Follow Process Output" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_process_listing">Process listing</h4>
<div class="paragraph">
<p>Clicking on the gear icon below the process control will open a popup showing all operating system processes that have been started by this <strong>Process</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Process_List.png"><img src="images/BDeploy_Process_List.png" alt="List of Operating System Processes" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_data_files">Data Files</h4>
<div class="paragraph">
<p>The <strong>Data Files</strong> dialog lists all files that are stored in the data directory of each minion. Files can be downloaded or opened directly in the the UI. The table is by default sorted by the last modification timestamp. Thus the newest files displayed first. The dialog utilizes pagination and only the top 10 files are shown. This can be changed using the toolbar below the table.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_DataFiles_Browser.png"><img src="images/BDeploy_DataFiles_Browser.png" alt="Data File Browser" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>When opened in place, the <b class="button">Follow</b> toggle allows to grab new output as it is written on the server.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_DataFiles_Show.png"><img src="images/BDeploy_DataFiles_Show.png" alt="Show Data File" width="480"></a>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_client_applications">Client Applications</h3>
<div class="paragraph">
<p>A dedicated overview page shows all configured <strong>Client Applications</strong> of an entire <strong>Instance Group</strong>. This page can be opened by navigating to the <strong>Instance Browser</strong> of the desired <strong>Instance Group</strong>. Clicking on the <span class="menuseq"><b class="menu">Context Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Client Applications</b></span> menu opens the overview page.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Client_Download_Page.png"><img src="images/BDeploy_Client_Download_Page.png" alt="Application Download Page" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The page will offer the appropriate <strong>Client Application</strong> based on the operating system that the user is currently using. Switching the OS can be done by clicking the desired operating system in the top right corner.</p>
</div>
<div class="sect3">
<h4 id="_launcher">Launcher</h4>
<div class="paragraph">
<p><strong>Client Application</strong> are started through a special <strong>Launcher</strong> that needs to be installed on all client computers. The launcher is responsible for keeping the application up-to-date and to pass the configured parameters to the application.</p>
</div>
</div>
<div class="sect3">
<h4 id="_installer">Installer</h4>
<div class="paragraph">
<p>An <strong>Installer</strong> is provided for each <strong>Client Application</strong> to make the installation as easy as possible. The installer does not have any prerequisites and can be downloaded and executed by any user. No administrative privileges are required.</p>
</div>
<div class="paragraph">
<p>The <strong>Installer</strong> will check if the latest version of the <strong>Launcher</strong> is already installed. If not then the <strong>Launcher</strong> is downloaded and stored on the client computer. The user can then start a <strong>Client Application</strong> with the branded <strong>Link</strong> that is stored on the <strong>Desktop</strong> or in the <strong>Start Menu</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Installer</strong> stores the <strong>Launcher</strong> and all <strong>Client Applications</strong> under <em>%LOCALAPPDATA%\BDeploy</em> on Windows or <em>$HOME/.bdeploy</em> on Linux. This location can be changed by setting the environment variable <strong>BDEPLOY_HOME</strong>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_click_start">Click &amp; Start</h4>
<div class="paragraph">
<p><strong>Click &amp; Start</strong> enables the launching of <strong>Client Application</strong> by simply clicking a link in the web browser. In this case the applications are not integrated into the operating system (Start Menu, Desktop Shortcut). A prerequisite is that the <strong>Click &amp; Start Launcher</strong> is deployed on the client computer. This can be done by using the <strong>Click &amp; Start Installer</strong> available in the top-right corner of the <strong>Client Applications</strong> page. The installer will download the <strong>Click &amp; Start Launcher</strong> and associate it with <strong>.bdeploy</strong> files.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <strong>Launcher</strong> can also be manually deployed using the provided ZIP file. After downloading and unpacking the <strong>Launcher</strong> must be associated with <strong>.bdeploy</strong> files using the FileAssoc.exe on Windows or file-assoc.sh on Linux contained in the launcher.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Clicking on a <em>Click &amp; Start</em> link in the <strong>Browser</strong> will download a <strong>.bdeploy</strong> file that can be directly executed. A more elegant way is to configure the <strong>Browser</strong> to directly open the <strong>.bdeploy</strong> file type. Firefox as well as Chrome allows to configure this after the file has been downloaded.</p>
</div>
</div>
<div class="sect3">
<h4 id="_multi_user_installations">Multi-User Installations</h4>
<div class="paragraph">
<p>Larger organizations typically do not want to deploy client applications on each client computer. They prefer to install the client software on a central server and publish the software via Citrix or similar technologies so that all users have access to one shared instance. This has the advantage that the administrators are in control of the installation and can centralize the update handling. BDeploy supports such an installation szenario.</p>
</div>
<div class="paragraph">
<p>There are two different locations that are important in the context of deploying applications in a multi-user setup:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong>Installation Area</strong> - The location where the launcher as well as all applications are installed. This location is typically protected by file system privileges so that an <strong>Administrator</strong> has full permissions and all other users have read permissions. This location is defined by the environment variable <strong>BDEPLOY_HOME</strong>.</p>
</li>
<li>
<p><strong>User Area</strong> - The per-user are where the launcher as well as each launched application is permitted to write files. This location is mandatory in case that the <strong>Installation Area</strong> is read-only. This location is defined by the environment variable <strong>BDEPLOY_USER_AREA</strong>.</p>
</li>
</ul>
</div>
<div class="sect4">
<h5 id="_configuration">Configuration</h5>
<div class="paragraph">
<p>When the <strong>Installation Area</strong> is read-only the environment variable <strong>BDEPLOY_USER_AREA</strong> must be set for each user and must point to a directory that is writable for the user that wants to launch an application.</p>
</div>
</div>
<div class="sect4">
<h5 id="_installing_new_software">Installing new software</h5>
<div class="paragraph">
<p>New software is typically installed by the <strong>Administrator</strong> that has full permissions in the <strong>Installation Area</strong>. The administrator is either using the provided <strong>Installer</strong> or a <strong>Click &amp; Start</strong> file in order to install the new application. After that step the application is available and can be launched by each new user by using the <strong>CLick &amp; Start</strong> file.</p>
</div>
</div>
<div class="sect4">
<h5 id="_updating_software">Updating software</h5>
<div class="paragraph">
<p>Whenever a new <strong>Product version</strong> is <strong>Activated</strong> on the server the administrator <strong>needs</strong> to launch the application <strong>once</strong> to deploy the new update. Not doing that will lead to an error that each user receives when trying to launch the application. The <strong>Launcher</strong> always checks for updates and tries to install them. Using an outdated application is not permitted and thus users will not be able to launch the application any more.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Client_Launcher_Update_Required.png"><img src="images/BDeploy_Client_Launcher_Update_Required.png" alt="Required Software Update" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Configuration changes in a client application - like adding, removing or changing a parameter - <strong>do not</strong> require <strong>Administrator</strong> attention since the installation itself is not affected. The change is automatically applied on the next start of the application.
</td>
</tr>
</table>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Changing the product version or changing the launcher version on the server require a manual interaction of the <strong>Administrator</strong> otherwise <strong>NO</strong> user can use the client application anymore.
</td>
</tr>
</table>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_centralmanaged_specific_configuration">Central/Managed Specific Configuration</h3>
<div class="paragraph">
<p>The <a href="#_modes_of_operation">Central/Managed Mode</a> requires some configuration to attach <code>CENTRAL</code> and <code>MANAGED</code> servers.</p>
</div>
<div class="paragraph">
<p>On the <code>CENTRAL</code> server side:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Each <strong>Instance Group</strong> has a list of <code>MANAGED</code> servers attached to it.</p>
</li>
<li>
<p>Each <strong>Instance</strong> is associated with exactly <strong>one</strong> of those <code>MANAGED</code> servers.</p>
</li>
<li>
<p>Synchonization to the <code>CENTRAL</code> servers data store is done on demand (through a button in the Web UI). When synchonizing from a <code>MANAGED</code> to a <code>CENTRAL</code> server, only <em>configuration</em> data is synchronized. Actual <strong>product</strong> and <strong>application</strong> data is only synchronized when explicitly requested through the <a href="#_product_synchronization">Product Synchronization</a> page on the <code>CENTRAL</code> server.</p>
</li>
<li>
<p>It is possible to create a new <strong>Instance Version</strong> on the <code>CENTRAL</code> server from a <strong>Product Version</strong> which has been pushed only to the <code>CENTRAL</code> server (but not to the <code>MANAGED</code>). In this case, the required product data is sent to the <code>MANAGED</code> server once <strong>Install</strong> is performed on this <strong>Instance Version</strong>.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>On The <code>MANAGED</code> server side:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Creation and editing of <strong>Instance Group</strong> (title, description, logo, etc.) is not possible locally. This has to happen on the <code>CENTRAL</code> server, as information <strong>must</strong> match.</p>
</li>
<li>
<p>Creation and editing of <strong>Instances</strong> (applications, parameters, etc.) is possible just the same as with a <code>STANDALONE</code> server. New data will be synchronized to the <code>CENTRAL</code> server the next time the <code>CENTRAL</code> server requests such a synchronization.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>BDeploy</strong> is built for restrictive networks. The assumption is that the <code>CENTRAL</code> server can contact all its <code>MANAGED</code> servers, but never the other way around.
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_attaching_an_instance_group_to_a_central_server">Attaching an Instance Group to a Central Server</h4>
<div class="paragraph">
<p>You will notice that a <code>MANAGED</code> server will greet slightly different on the welcome page. Instead of a <em>create instance group</em> button, there is an <em>attach instance group</em> button, and the text reads accordingly.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Welcome_Managed.png"><img src="images/BDeploy_Welcome_Managed.png" alt="Managed Server Welcome Page" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Attaching an <strong>Instance Group</strong> is a two way operation.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The <code>MANAGED</code> server needs to share some details about itself with the <code>CENTRAL</code> server. This happens either via drag &amp; drop of an element from the <code>MANAGED</code> servers Web UI to the <code>CENTRAL</code> servers Web UI, or manually by downloading the <code>MANAGED</code> servers information and dropping that file to the <code>CENTRAL</code> servers Web UI.</p>
</li>
<li>
<p>On the <code>CENTRAL</code> server, you will choose the <strong>Instance Group</strong> which should be attached. The <strong>Instance Group</strong> <em>must</em> exist on the <code>CENTRAL</code> server. If the <code>MANAGED</code> server happens to have an <strong>Instance Group</strong> of the same name already (i.e. if the <code>MANAGED</code> server was migrated from <code>STANDALONE</code>), this is perfectly fine - <strong>Instances</strong> in this <strong>Instance Group</strong> will not be lost, they will be attached to the <code>CENTRAL</code> server instead.</p>
</li>
<li>
<p>The <code>CENTRAL</code> server will try to contact the <code>MANAGED</code> server. You can provide an alternate URL to accomodate for hostname differences (different DNS, NAT, VPN, etc.) before it does so.</p>
</li>
<li>
<p>Once contacted, the <code>CENTRAL</code> server will push the <strong>Instance Group</strong> meta-data to the <code>MANAGED</code> server, as the information on the <code>CENTRAL</code> is the single source of <strong>Instance Group</strong> configuration.</p>
</li>
<li>
<p>Finally, the <code>CENTRAL</code> server will fetch all potentially existing <strong>Instance</strong> information from the <code>MANAGED</code> server. This is only relevant if the <code>MANAGED</code> server was migrated from <code>STANDALONE</code> mode before.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To attach in <strong>Instance Group</strong>, you need both Web UIs of <code>CENTRAL</code> and <code>MANAGED</code> server. Make sure you have both available and open in browsers next to each other (on the same machine, so drag &amp; drop will work).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
You can easily distiguish <code>CENTRAL</code> and <code>MANAGED</code> servers by the according banner in the upper right corner of the Web UI.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>On the <code>CENTRAL</code> server, choose <span class="menuseq"><b class="menu">Context Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Managed Servers</b></span> on the <strong>Instance Group</strong> you want to attach. This will take you to the <strong>Managed Servers</strong> page for this <strong>Instance Group</strong>. Initially, this page will be empty.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Central_Managed_Servers.png"><img src="images/BDeploy_Central_Managed_Servers.png" alt="Managed Servers Page on Central" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Click the <b class="button">Attach Managed Server</b> button to initiate attaching a <code>MANAGED</code> server to this <strong>Instance Group</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Central_Attach_Drop.png"><img src="images/BDeploy_Central_Attach_Drop.png" alt="Attach Managed Server Wizard" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>After the introductionary text, you will be prompted to drop <code>MANAGED</code> server information on a drop-zone. You can find the counterpiece on the <code>MANAGED</code> server. To initiate attaching on the <code>MANAGED</code> server, click the <b class="button">Attach Instance Group</b> button on the main <strong>Instance Group</strong> page (which is the initial start page of the Web UI). This will launch the <em>Attach to Central Server</em> wizard.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Managed_Attach_Intro.png"><img src="images/BDeploy_Managed_Attach_Intro.png" alt="Attach to Central Server" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The next step in the wizard on the <code>MANAGED</code> server will provide the dragable card which needs to be dragged to the <code>CENTRAL</code> servers drop zone. Meanwhile, the <code>MANAGED</code> server will wait for an incoming connection from the <code>CENTRAL</code> server, once the information has been digested properly.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Managed_Attach_Waiting.png"><img src="images/BDeploy_Managed_Attach_Waiting.png" alt="Attach to Central Server" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Alternatively (e.g. if you cannot open both Web UIs on the same machine) you can click <b class="button">Continue Manually</b> to download the information as a file. This file can be copied to a machine where access to the <code>CENTRAL</code> server is possible. There you can drop the file to the drop-zone, instead of the dragable card.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Once the information is dropped on the according drop zone on the <code>CENTRAL</code> server, it will confirm a successful read of the information. Click <b class="button">Next</b>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Central_Attach_Read_Success.png"><img src="images/BDeploy_Central_Attach_Read_Success.png" alt="Successful read of Managed Server Information" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>On the next step, you have the chance to provide an alternative URL as well as a description of the <code>MANAGED</code> server. The alternate URL should be reachable from the <code>CENTRAL</code> server and accomodate for any hostname mapping required (NAT, VPN, DNS, &#8230;&#8203;).</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Central_Attach_Info.png"><img src="images/BDeploy_Central_Attach_Info.png" alt="Additional Managed Server Information" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Clicking <b class="button">Next</b> will initiate the actual attachment process. The <code>CENTRAL</code> server will contact the <code>MANAGED</code> server using the provided URL. It will then perform the initial synchronization of data. Once this is done, you will see a success notice which you can dismiss using the <b class="button">Done</b> button.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Central_Attach_Done.png"><img src="images/BDeploy_Central_Attach_Done.png" alt="Additional Managed Server Information" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>You will be taken back to the <strong>Managed Servers</strong> page, which shows the newly attached <code>MANAGED</code> server and its state.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Central_Managed_Servers_Sync.png"><img src="images/BDeploy_Central_Managed_Servers_Sync.png" alt="Additional Managed Server Information" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_instance_synchronization">Instance Synchronization</h4>
<div class="paragraph">
<p>Once a <code>MANAGED</code> server is attached to the <code>CENTRAL</code> server, <strong>Instance</strong> data can be synchronized from the <code>MANAGED</code> server on demand by the <code>CENTRAL</code> server. This can happen either from the <strong>Managed Servers</strong> page you saw before, by pressing <b class="button">Synchronize</b>, or directly from the <strong>Instance</strong>. It is possible to synchronize both from the <strong>Instance Browser</strong> and from the <strong>Instance Overview</strong> page by pressing on the name of the <code>MANAGED</code> server. This element only exists on the <code>CENTRAL</code> server.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Central_Instance_With_Sync.png"><img src="images/BDeploy_Central_Instance_With_Sync.png" alt="Synchronize Managed Server" width="480"></a>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
It is not required to synchronize the other way (<code>CENTRAL</code> to <code>MANAGED</code>) as this happens implicitly when performing changes to an <strong>Instance</strong>. Changes are actually performed <strong>always</strong> on the <em>controlling</em> master, which is <strong>always</strong> the <code>MANAGED</code> server.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_migrating_between_modes">Migrating between Modes</h4>
<div class="paragraph">
<p>There is a limited possibility to change the <em>purpose</em> of an already intialized <strong>BDeploy</strong> server root directory. It is only possible to migrate from <code>STANDALONE</code> to <code>MANAGED</code> and vice versa, as data is <em>mostly</em> compatible. A command line tooling exists for this purpose.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="bash">bdeploy set-mode --root=&lt;root-directory&gt; --mode=MANAGED</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value for mode may be <code>MANAGED</code> or <code>STANDALONE</code>. The actual migration of data may be performed later on when first accessing them. For instance, when clicking an <strong>Instance Group</strong>, you might be prompted that an <strong>Instance Group</strong> requires to be attached to a <code>CENTRAL</code> server in <code>MANAGED</code> mode, and the <strong>Attach to Central Server</strong> wizard is launched.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<strong>BDeploy</strong> server root directories are assumed to be of mode <code>STANDALONE</code> if they have been initilized with a <strong>BDeploy</strong> version prior to <em>1.4.0</em>.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_product_synchronization">Product Synchronization</h4>
<div class="paragraph">
<p>When working with <code>CENTRAL</code> and <code>MANAGED</code> servers, products can be uploaded to either of the servers. However, a product version must be available on the server which is used to update an <strong>Instance</strong> to that version.</p>
</div>
<div class="paragraph">
<p>The recommended way of working is to exclusively use the <code>CENTRAL</code> server for all tasks, e.g. pushing new product versions, changing configuration, etc. When <em>installing</em> an <strong>Instance</strong> version to the target server, the required product data is automatically transferred as part of the process.</p>
</div>
<div class="paragraph">
<p>Sometimes it might still be necessary to transfer product versions from one server to another. For instance, a product version was directly pushed to <code>MANAGED</code> server <em>A</em>, but is required as well on <code>MANAGED</code> server <em>B</em>. In this case you can use the <strong>Product Synchronization</strong> wizard to copy product versions from one server to another.</p>
</div>
<div class="paragraph">
<p>You can find the wizard on the <strong>Manage Products</strong> page on the <code>CENTRAL</code> server. The additional <b class="button">Synchronize</b> button is only available on the <code>CENTRAL</code> server.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Sync_Button.png"><img src="images/BDeploy_Product_Sync_Button.png" alt="Synchronize Product Versions Button" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Clicking it will launch the synchronization wizard. It allows to choose a <em>source</em> as well as a <em>target</em> server. You can choose both from all available <code>MANAGED</code> servers and the <code>CENTRAL</code> server.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Sync_Wizard.png"><img src="images/BDeploy_Product_Sync_Wizard.png" alt="Choose Source and Target" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Clicking <b class="button">Next</b> will fetch available products from the <em>source</em> server. Once you choose a product from the drop-down, all available product versions are fetch from <em>both</em> servers. You will be presented a list of versions which are not yet available on the <em>target</em> server.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Sync_Version.png"><img src="images/BDeploy_Product_Sync_Version.png" alt="Choose Product Versions" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Clicking the <em>arrow</em> button on a product version, or dragging the version to the target list will mark this version as <em>to-be-synchronized</em>. Once satisfied with the selection, click <b class="button">Next</b> to initiate the transfer of the product versions from <em>source</em> to <em>target</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If both <em>source</em> and <em>target</em> are <code>MANAGED</code> servers, the <code>CENTRAL</code> server will also receive the product version as a side-effect.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The wizard will show progress information while the transfer is active. Once the transfer is done, the wizard will tell accordingly.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Product_Sync_Done.png"><img src="images/BDeploy_Product_Sync_Done.png" alt="Product Transfer Done" width="480"></a>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_tutorials">Tutorials</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter contains a series of tutorials that cover the basics steps that a typical end user should be able to do.</p>
</div>
<div class="sect2">
<h3 id="_how_can_i_change_a_process_configuration">How can I change a process configuration?</h3>
<div class="paragraph">
<p>Changing the configuration of a <strong>Process</strong> is done in the <strong>Process Configuration Dialog</strong>:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on the desired <strong>Instance Group</strong></p>
</li>
<li>
<p>Click in the desired <strong>Instance</strong></p>
</li>
<li>
<p>Ensure that the latest version is selected in the <strong>Instance Version</strong> sidebar.</p>
</li>
<li>
<p>Open the menu of the desired <strong>Process</strong> by clicking the three dots in the top right corner of the <strong>Process Card</strong></p>
</li>
<li>
<p>Click on <strong>Configure</strong>. If <strong>View</strong> is shown then you are not on the latest <strong>Instance Version</strong></p>
</li>
<li>
<p>Modify the <strong>Process</strong> as desired: Rename, Change Parameters, Add / Remove Parameters</p>
</li>
<li>
<p>Click on <strong>Apply</strong> in the top right corner if you are finished with this <strong>Process</strong></p>
</li>
<li>
<p>A new <em>Locally Modified</em> <strong>Instance Version</strong> has been created.</p>
</li>
<li>
<p>Repeat the steps 4-7 with every <strong>Process</strong> that should be adopted.</p>
</li>
<li>
<p>Click on <strong>Save</strong> in the top right corner.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The changes are now saved but they are not yet active. The new version must now be <strong>Deployed</strong> and all <strong>Processes</strong> must be restarted so that the changes have an effect.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Open the menu of the desired <strong>Instance Version</strong> by clicking the three dots on the <strong>Instance Version Card</strong></p>
</li>
<li>
<p>Click on <strong>Install</strong> and wait for the operation to complete.</p>
</li>
<li>
<p>Click on <strong>Activate</strong></p>
</li>
<li>
<p>A hint (<code>Outdated</code>) will be displayed if a <strong>Process</strong> is running in an older version.</p>
</li>
<li>
<p>Stop the process by clicking on the <strong>Process Card</strong>. Click on the <b class="button">Stop</b> button.</p>
</li>
<li>
<p>Start the processes by click on the <b class="button">Start</b> button.</p>
</li>
<li>
<p>Repeat the steps 5-6 with each process that should be running</p>
</li>
<li>
<p>The hint (<code>Outdated</code>) disappears once all processes are running in the active version.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The configuration changes are now live and all <strong>Processes</strong> are running again. The <a href="#_process_settings">Process Settings</a> and the <a href="#_process_control">Process Control</a> chapters provide more details about the step outlined in this tutorial.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_can_i_see_whats_up_and_running">How can I see what&#8217;s up and running?</h3>
<div class="paragraph">
<p>The status of an <strong>Instance</strong> is visualized with icons in the <strong>Instance Overview</strong> page at several places:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 42.8571%;">
<col style="width: 42.8572%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Process Card</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Tutorial_Process_Card.png"><img src="images/BDeploy_Tutorial_Process_Card.png" alt="BDeploy Tutorial Process Card"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An icon on card shows the current status. No icon means the process is stopped.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Process Control</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Tutorial_Process_Control.png"><img src="images/BDeploy_Tutorial_Process_Control.png" alt="BDeploy Tutorial Process Control"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The sidebar shows the current process status along with some additional information about the uptime. No icon means the process is stopped.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><strong>Instance Version</strong></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Tutorial_Process_Versions.png"><img src="images/BDeploy_Tutorial_Process_Versions.png" alt="BDeploy Tutorial Process Versions"></a>
</div>
</div></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An icon on the card shows the cumulated status of <em>all</em> processes of this version. No icon means that nothing is running in this version.</p>
</div></div></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <a href="#_process_control">Process Control</a> chapters provide more details about the individual process states along with a state graph that visualizes the life cycle of a process.</p>
</div>
</div>
<div class="sect2">
<h3 id="_how_can_i_deploy_a_new_product_version">How can I deploy a new product version?</h3>
<div class="paragraph">
<p>Upgrading the <strong>Product Version</strong> that is used in an <strong>Instance</strong> requires two distinct steps:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Uploading the new <strong>Product Version</strong></p>
</li>
<li>
<p>Upgrading the <strong>Instance</strong></p>
</li>
</ol>
</div>
<div class="sect3">
<h4 id="_upload_product_version">Upload Product Version</h4>
<div class="paragraph">
<p>Uploading a new <strong>Product Version</strong> is done in the <strong>Manage Products</strong> page:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Click on the desired <strong>Instance Group</strong></p>
</li>
<li>
<p>Click on <span class="menuseq"><b class="menu">Context Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Products</b></span> menu of the <strong>Instance Browser</strong> dialog</p>
</li>
<li>
<p>A card for each <strong>Product</strong> is displayed. Clicking on the card shows all available versions</p>
</li>
<li>
<p>Click on the <b class="button">Upload</b> button in the bottom right corner</p>
</li>
<li>
<p>Select the ZIP archive containing the new <strong>Product Version</strong>. This archive is typically created by your <strong>Build</strong> tool</p>
</li>
<li>
<p>Click on Upload to transfer the file to the server.</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <strong>Product Version</strong> is now available and can be used in all <strong>Instances</strong> of this <strong>Instance Group</strong>.</p>
</div>
</div>
<div class="sect3">
<h4 id="_upgrade_instance">Upgrade Instance</h4>
<div class="paragraph">
<p>Changing the <strong>Product Version</strong> of an <strong>Instance</strong> is done in the <strong>Instance Overview</strong> dialog:</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Navigate back to the <strong>Instance Browser</strong> dialog by clicking on the back button</p>
</li>
<li>
<p>Open the desired <strong>Instance</strong></p>
</li>
<li>
<p>A hint is displayed that a newer <strong>Product Version</strong> is available</p>
</li>
<li>
<p>Clicking on this hint opens the <strong>Product Version</strong> sidebar</p>
</li>
<li>
<p>Click on the <b class="button">Upgrade</b> button of the desired version</p>
</li>
<li>
<p>The sidebar is closed and a new locally modified <strong>Instance Version</strong> is created</p>
</li>
<li>
<p>All Applications are marked as modified as they are now based on a different <strong>Product Version</strong>
<em>Hint:</em> Changing the <strong>Product Version</strong> can result in validation issues if new mandatory parameters are introduced</p>
</li>
<li>
<p>Adopt the configuration of the <strong>Processes</strong> as required</p>
</li>
<li>
<p>Click on <strong>Save</strong> in the top right corner to save this version</p>
</li>
</ol>
</div>
<div class="paragraph">
<p>The <strong>Instance</strong> is now based on the new <strong>Product Version</strong>. Remember that the new <strong>Instance Version</strong> must be <strong>Installed</strong> and <strong>Activated</strong> so that the changes have an impact. Please read the <a href="#_how_can_i_change_a_process_configuration">Process Configuration</a> tutorial about more details how to do that.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_advanced_usage">Advanced Usage</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="_advanced_terms">Advanced Terms</h3>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Term</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>BHive</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The actual storage backend. Provides data de-duplication and delta-based transfers. Synchronizing two <strong>BHives</strong> will transfer just the files that are not present in the other (potentially remote) hive.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Manifest</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A <strong>Manifest</strong> is a unique <strong>Key</strong> which identifies a <strong>Tree</strong> of <strong>Files</strong> inside a <strong>BHive</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Software Repository</strong></p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>A <strong>Software Repository</strong> is a named <strong>BHive</strong> which is dedicated to storing <strong>Manifests</strong> which contain arbitrary <em>deliverables</em>. This is not necessarily a piece of software. It may be <em>any</em> set of files and directories.</p>
</div>
<div class="paragraph">
<p>When building a <strong>Product</strong>, it&#8217;s declared dependencies are resolved by querying all <strong>Software Repositories</strong> on the target <strong>BDeploy</strong> server.</p>
</div></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="_integration_of_a_new_product">Integration of a new product</h3>
<div class="paragraph">
<p>This chapter is intended for those who want to integrate their own <strong>Product</strong> to be deployed with <strong>BDeploy</strong>. Therefore a couple of YAML files are required. These files describe your product and all its applications together with some additional meta-data. These artifacts are required:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1"><a href="#_app_info_yaml">app-info.yaml</a></dt>
<dd>
<p>YAML file to describe one single <strong>Application</strong>. It is required once for every client and server <strong>Application</strong> of the product.</p>
</dd>
<dt class="hdlist1"><a href="#_product_info_yaml">product-info.yaml</a></dt>
<dd>
<p>YAML file with meta-data for the whole product.</p>
</dd>
<dt class="hdlist1"><a href="#_product_version_yaml">product-version.yaml</a></dt>
<dd>
<p>YAML file required for every <strong>Product Version</strong>.</p>
</dd>
<dt class="hdlist1"><a href="#_application_template_yaml">application-template.yaml</a></dt>
<dd>
<p>optional YAML file(s) which can be used to define <strong>Application Templates</strong></p>
</dd>
<dt class="hdlist1"><a href="#_instance_template_yaml">instance-template.yaml</a></dt>
<dd>
<p>optional YAML file(s) which can be used to define <strong>Instance Templates</strong></p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>This chapter will walk you through these artifacs, what they are for and how to define them.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
On the BDeploy Releases page you will find some zipped sample products for each release, see <a href="https://github.com/bdeployteam/bdeploy/releases" class="bare">https://github.com/bdeployteam/bdeploy/releases</a>
</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_app_info_yaml">app-info.yaml</h4>
<div class="paragraph">
<p>The <code>app-info.yaml</code> file is one of the most important parts of <strong>BDeploy</strong>. It describes an <strong>Application</strong>, especially its start command. This <strong>Application</strong> may be <em>any</em> application which contains an <em>executable</em> (whatever kind, script, executable, etc.) and which allows 'installation' by copy to a directory. This is important, as <strong>BDeploy</strong> will 'install' an application by ultimately copying the application to an automatically determined internal directory and launch it from there.</p>
</div>
<div class="paragraph">
<p>Basically, <code>app-info.yaml</code> allows you to specify which executable to run, and which parameters could <strong>potentially</strong> be used to configure the <strong>Application</strong>. The <code>app-info.yaml</code> does not specify an actual configuration, but describes all possible parameters for an <strong>Application</strong>.</p>
</div>
<div class="paragraph">
<p>The <code>app-info.yaml</code> file should be placed in the root directory of the <strong>Application</strong> it describes.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="yaml">name: "My Application" <i class="conum" data-value="1"></i><b>(1)</b>
type: CLIENT <i class="conum" data-value="2"></i><b>(2)</b>

supportedOperatingSystems: <i class="conum" data-value="3"></i><b>(3)</b>
  - LINUX
  - WINDOWS

branding: <i class="conum" data-value="4"></i><b>(4)</b>
  icon: "branding/my-icon.ico"
  splash:
    image: "branding/my-splash.bmp"
    textRect:
      x: 20
      y: 174
      width: 400
      height: 20
      foreground: "#000000"
    progressRect:
      x: 15
      y: 194
      width: 450
      height: 12
      foreground: "#333333"

processControl: <i class="conum" data-value="5"></i><b>(5)</b>
  gracePeriod: 3000
  supportedStartTypes:
   - INSTANCE
  supportsKeepAlive: true
  noOfRetries: 5

startCommand: <i class="conum" data-value="6"></i><b>(6)</b>
  launcherPath: "{{WINDOWS:launch.bat}}{{LINUX:launch.sh}}"
  parameters:
    - uid: "my.param.1"
      name: "My numeric parameter"
      longDescription: "This is a numeric parameter"
      groupName: "My Parameters"
      parameter: "--number"
      defaultValue: "5"
      type: NUMERIC
    - uid: "my.param.2"
      name: "My textual parameter"
      longDescription: "This is a textual parameter"
      groupName: "My Parameters"
      parameter: "--text"
      mandatory: true
      suggestedValues:
        - "Value 1"
        - "Value 2"

stopCommand: <i class="conum" data-value="7"></i><b>(7)</b>
  ...

endpoints: <i class="conum" data-value="8"></i><b>(8)</b>
  http:
    - id: "my-endpoint" <i class="conum" data-value="9"></i><b>(9)</b>
      path: "path/to/the/endpoint"
      port: "{{V:port-param}}" <i class="conum" data-value="10"></i><b>(10)</b>
      secure: false

runtimeDependencies: <i class="conum" data-value="11"></i><b>(11)</b>
  - "adoptopenjdk/jre:1.8.0_202-b08"</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A human readable name of the <strong>Application</strong>. Will be displayed in the <strong>Configure Application</strong> pane, and is also used as <em>default</em> name for any process <em>instantiated</em> from this <strong>Application</strong>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The type of the application, may be <code>SERVER</code> or <code>CLIENT</code>. <code>SERVER</code> applications can be deployed to master or slave <strong>Nodes</strong> and there be started as server processes. <code>CLIENT</code> applications in comparison cannot be deployed on a <strong>Node</strong>, but run on a client PC instead.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>List of supported operating systems. This list is solely used to verify during import of the <strong>Product</strong>, that the <strong>Application</strong> actually supports the operating system under which it is listed in the <code>product-version.yaml</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Only relevant for <code>CLIENT</code> applications: The <code>branding</code> attribute controls the appearance of <code>CLIENT</code> type <strong>Applications</strong> when downloaded by the user. It can be used to specify an <code>icon</code> (used to decorate desktop links created by the <em>client installer</em>), and a <code>splash</code> screen. For the <code>splash</code>, you can fine tune the exact location used to display progress text and a progress bar while the application is downloaded to the client PC by the <a href="#_launcher_cli">Launcher CLI</a>. Paths are interpreted relative to the root folder of the <strong>Application</strong>.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Only relevant for <code>SERVER</code> applications: Process control parameters allow to fine tune how <code>SERVER</code> type <strong>Applications</strong> are started and kept alive by <strong>BDeploy</strong>. For details, see the list of <a href="#_supported_processcontrol_attributes">processControl</a> attributes.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>The start command of the <strong>Application</strong>. Contains the path to the <em>executable</em> to launch, as well as all known and supported parameters. For details, see the full list of <a href="#_supported_parameters_attributes">parameter</a> attributes. To apply e.g. instance-specific values, <a href="#_variable_expansion">Variable Expansion</a> is a powerful tool. It can be used for the <code>launcherPath</code> and each parameter&#8217;s <code>defaultValue</code>. In the Web UI it can be used for the parameter values.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>The optional stop command can be specified to provide a mechanism for clean application shutdown once <strong>BDeploy</strong> tries to stop a process. This command may use <a href="#_variable_expansion">Variable Expansion</a> to access parameter values of the <code>startCommand</code> (e.g. configured 'stop port', etc.). It is <strong>not</strong> configurable through the Web UI though. All parameter values will have their (expanded) default values set when the command is run. If no <code>stopCommand</code> is specified, <strong>BDeploy</strong> will try to gracefully quit the process (i.e. <code>SIGTERM</code>). Both with and without <code>stopCommand</code>, <strong>BDeploy</strong> resorts to a <code>SIGKILL</code> after the <code><a href="#_supported_parameters_attributes">gracePeriod</a></code> has expired.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>Optional definition of provided endpoints. Currently only HTTP endpoints are supported. These endpoints can be configured on the application later, including additional information like authentication, certificates, etc. <strong>BDeploy</strong> can later on call these endpoints when instructed to do so by a third-party application.</td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>The ID of the endpoint can be used to call the endpoint remotely by tunneling through potentially multiple levels of <strong>BDeploy</strong> servers.</td>
</tr>
<tr>
<td><i class="conum" data-value="10"></i><b>10</b></td>
<td><a href="#_variable_expansion">Variable Expansion</a> can be used on most of the endpoint properties.</td>
</tr>
<tr>
<td><i class="conum" data-value="11"></i><b>11</b></td>
<td>Optional runtime dependencies. These dependencies are included in the <strong>Product</strong> when building it. Dependencies are fetched from <strong><a href="#_software_repositories">Software Repositories</a></strong>. <code>launcherPath</code> and parameter <code>defaultValue</code> (and of course the final configuration values) can access paths within each of the dependencies by using the <code>{{M:adoptopenjdk/jre:1.8.0_202-b08}}</code> <a href="#_variable_expansion">Variable Expansion</a>, e.g. <code>launcherPath: {{M:adoptopenjdk/jre:1.8.0_202-b08}}/bin/java</code>. Also note that the declared dependency does not specify an operating system. This will be resolved by <strong>BDeploy</strong> to either an exact match, e.g. <code>adoptopenjdk/jre/linux:1.8.0_202-b08</code> on <code>LINUX</code>.</td>
</tr>
</table>
</div>
<div class="sect4">
<h5 id="_supported_processcontrol_attributes">Supported <code>processControl</code> attributes</h5>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>supportedStartTypes</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Can be either <code>MANUAL</code> (<strong>Application</strong> must be started <em>explicitly</em> through the Web UI or CLI), <code>MANUAL_CONFIRM</code> (<strong>Application</strong> must be started <em>explicitly</em> through the Web UI and a confirmation has to be entered by the user), or <code>INSTANCE</code> (the <strong>Application</strong> can be started <em>automatically</em> when the <strong>Start Instance</strong> command is issued, either manually or during server startup - implies <code>MANUAL</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>supportsKeepAlive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether this <strong>Application</strong> may be automatically restarted by <strong>BDeploy</strong> if it exits.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>noOfRetries</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The number of time <strong>BDeploy</strong> will retry starting the <strong>Application</strong> if it <code>supportsKeepAlive</code>. The counter is reset after the <strong>Application</strong> is running for a certain amount of time without exiting.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>gracePeriod</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">How long to wait (in milliseconds) for the <strong>Application</strong> to stop after issuing the <code>stopCommand</code>. After this timeout expired, the process will be killed.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_supported_parameters_attributes">Supported <code>parameters</code> attributes</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Parameters appear on the final command line in <strong>exact</strong> the order as they appear in the <code>app-info.yaml</code> file, regardless of how they are presented in the Web UI, or how they are grouped using the <code>groupName</code> attribute. This allows to build complex command lines with positional parameters through <code>app-info.yaml</code>.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 4.7619%;">
<col style="width: 4.7619%;">
<col style="width: 76.1905%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Default</th>
<th class="tableblock halign-left valign-top">Mandatory</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>uid</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A unique ID of the parameter within the whole product which will contain the <strong>Application</strong> described by this <code>app-info.yaml</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>name</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A human readable name of the parameter used as label in the configuration UI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>longDescription</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional human readable description of the paramater, which is displayed in an info popover next to the parameter in the Web UI.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>groupName</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>An optional group name. The configuration UI may use this information to group parameters with the same <code>groupName</code> together.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>suggestedValues</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">An optional list of suggested values for paremters of type <code>STRING</code> (the default). The Web UI will present this list when editing the parameter value.</p>
<p class="tableblock">[CAUTION]
Although parameters in the UI are grouped together (and thus might change order), the order in which parameters appear on the final command line is exactly the order in which they are defined in the <code>app-info.yaml</code> file.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>parameter</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>The actual parameter, e.g. <code>--parameter</code>, <code>-Dmy.system.prop</code>, etc.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The value of the parameter is not part of this definition, nor is any potential value separator (e.g. <code>=</code>).
</td>
</tr>
</table>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hasValue</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>true</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether the parameter has a value or not. If the parameter has no value, it is treated as <code>BOOLEAN</code> type parameter (i.e. it is either there (<code>true</code>) or not (<code>false</code>)).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueAsSeparateArg</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether the value of the parameter must be placed as a separate argument on the command line. If not, the value (if <code>hasValue</code>) will be concatenated to the <code>parameter</code> using the <code>valueSeparator</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>valueSeparator</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>=</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The character (sequence) to use to concatenate the <code>parameter</code> and the actually configured value of it together. Used if not <code>valueAsSeparateArg</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>defaultValue</code></p></td>
<td class="tableblock halign-left valign-top"></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A default value for the parameter. The default value may contain variable references according to the <a href="#_variable_expansion">Variable Expansion</a> rules.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>global</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether this parameter is <code>global</code>. This means that inside a single <strong>Instance</strong>, every process requiring this parameter will receive the same value. The configuration UI will provide input fields for the parameter for every <strong>Application</strong> which requires the parameter, and propagate value changes to all other <strong>Applications</strong> requiring it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>mandatory</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether the parameter is required. If the parameter is not required, it is by default not put on the command line and must be added manually through a dedicated dialog on the configuration page.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fixed</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>false</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Whether the parameter is fixed. This means that the parameter can <strong>not</strong> be changed by the user.</p>
</div>
<div class="paragraph">
<p>Consider a command line like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="bash">/path/to/java/bin/java -Dmy.prop=value -jar application.jar</code></pre>
</div>
</div>
<div class="paragraph">
<p>In this case you will want the user to be able to edit the value of <code>-Dmy.prop</code> parameter, but the user may <strong>never</strong> be able to edit the <code>-jar application.jar</code> part. A definition for this command line would look like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight"><code data-lang="yaml">startCommand:
  launcherPath: "{{M:openjdk/jre:1.8.0_u202-b08}}/bin/java{{WINDOWS:w.exe}}"
  parameters:
    - uid: "my.prop"
      name: "My Property"
      parameter: "-Dmy.prop"
      mandatory: true
    - uid: "my.jar"
      name: "Application JAR"
      parameter: "-jar"
      defaultValue: "application.jar"
      valueAsSeparateArg: true
      mandatory: true
      fixed: true <i class="conum" data-value="1"></i><b>(1)</b></code></pre>
</div>
</div>
<div class="paragraph">
<p>The fixed flag will cause the parameter to <strong>always</strong> use the defined default value and disable editing in the configuration UI.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>type</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>STRING</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Type of parameter. This defines the type of input field used to edit the parameter. Available are <code>STRING</code>, <code>NUMERIC</code>, <code>BOOLEAN</code>, <code>PASSWORD</code>.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect4">
<h5 id="_supported_endpoints_http_attributes">Supported <code>endpoints.http</code> attributes</h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Endpoints definitions are templates which can later on be configured by the user. The only values not editable by the user are <code>id</code> and <code>path</code>.
</td>
</tr>
</table>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 15.7894%;">
<col style="width: 84.2106%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Attribute</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>id</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The unique ID of the endpoint. This ID can be used by an authorized third-pary application to instruct <strong>BDeploy</strong> to call this endpoint and return the result.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>path</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The path of the endpoint on the target process. <strong>BDeploy</strong> uses this and other parameters (<code>port</code>) to construct an URI to the local server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>port</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The port this endpoint is hosted on. <a href="#_variable_expansion">Variable Expansion</a> can be used, for instance to reference a parameter of the application (using <code>{{V:port-param}}</code> where <code>port-param</code> is the ID of a parameter on the <code>startCommand</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>secure</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether HTTPS should be used when calling the endpoint</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trustAll</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Whether to trust any certificate when using HTTPS to call the endpoint. Otherwise a custom <code>trustStore</code> must be set if a self-signed certificate is used by the application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trustStore</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to a KeyStore in the <code>JKS</code> format, containing certificates to trust. <a href="#_variable_expansion">Variable Expansion</a> can be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>trustStorePass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The passphrase used to load the <code>trustStore</code>. <a href="#_variable_expansion">Variable Expansion</a> can be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authType</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The type of authentication used by <strong>BDeploy</strong> when calling the endpoint. Can be <code>NONE</code>, <code>BASIC</code> or <code>DIGEST</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authUser</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The username to use for <code>BASIC</code> or <code>DIGEST</code> <code>authType</code>. <a href="#_variable_expansion">Variable Expansion</a> can be used.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>authPass</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password to use for <code>BASIC</code> or <code>DIGEST</code> <code>authType</code>. <a href="#_variable_expansion">Variable Expansion</a> can be used.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_product_info_yaml">product-info.yaml</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is no actual requirement for the file to be named <code>product-info.yaml</code>. This is just the default, but you can specify another name on the command line or in build tool integrations.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>product-info.yaml</code> file describes which <strong>Applications</strong> are part of the final <strong>Product</strong>, as well as some additional <strong>Product</strong> meta-data.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="yaml">name: My Product <i class="conum" data-value="1"></i><b>(1)</b>
product: com.example/product <i class="conum" data-value="2"></i><b>(2)</b>
vendor: My Company <i class="conum" data-value="3"></i><b>(3)</b>

applications:
  - my-app1 <i class="conum" data-value="4"></i><b>(4)</b>
  - my-app2

configTemplates: my-config <i class="conum" data-value="5"></i><b>(5)</b>
pluginFolder: my-plugins <i class="conum" data-value="6"></i><b>(6)</b>
applicationTemplates:
  - 'my-templates/app-template.yaml' <i class="conum" data-value="7"></i><b>(7)</b>
instanceTemplates:
  - 'my-templates/template.yaml' <i class="conum" data-value="8"></i><b>(8)</b>
versionFile: my-versions.yaml <i class="conum" data-value="9"></i><b>(9)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A human readable name of the <strong>Product</strong> for display purposes in the Web UI</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A unique ID of the <strong>Product</strong> which is used to base <strong>Instances</strong> of. This should not change, as changing the <strong>Product</strong> ID of an existing <strong>Instance</strong> is not supported.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>The vendor of the product. Displayed in the Web UI and used when installing client applications.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>The list of <strong>Applications</strong> which are part of the <strong>Product</strong>. These IDs can be anything, they just have to match the IDs used in the <code>product-version.yaml</code> referenced below.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Optional: A relative path to a directory containing configuration file templates, which will be used as the default set of configuration files when creating an <strong>Instance</strong> from the resulting <strong>Product</strong>.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Optioanl: A relative path to a directory containing one or more plugin JAR files. These plugins are loaded by the server on demand and provided for use when configuring applications which use this very product version.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>A reference to an application template YAML file which defines an <a href="#_application_template_yaml"><code>application-template.yaml</code></a>.</td>
</tr>
<tr>
<td><i class="conum" data-value="8"></i><b>8</b></td>
<td>A reference to an instance template YAML file which defines an <a href="#_instance_template_yaml"><code>instance-template.yaml</code></a></td>
</tr>
<tr>
<td><i class="conum" data-value="9"></i><b>9</b></td>
<td>The <code>product-version.yaml</code> which associates the <strong>Application</strong> IDs (used above) with actual paths to <strong>Applications</strong> on the file system.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_product_version_yaml">product-version.yaml</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is no actual requirement for the file to be named <code>product-version.yaml</code> as it is referenced from the <code>product-info.yaml</code> by relative path anyway. This is just the default name.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The <code>product-version.yaml</code> file associates <strong>Application</strong> IDs used in the <code>product-info.yaml</code> with actual locations on the local disc. This is used to find an import each included <strong>Application</strong> when importing the <strong>Product</strong>.</p>
</div>
<div class="paragraph">
<p>The reason why this file is separate from the <code>product-info.yaml</code> is because its content (e.g. version) is specific to a single product <strong>Build</strong> . Therfore the <code>product-version.yaml</code> ideally is created during the build process of the product by the build system of your choice. This is different to the <code>app-info.yaml</code> files and the <code>product-info.yaml</code> file as they are written manually.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="yaml">version: "2.1.0.201906141135" <i class="conum" data-value="1"></i><b>(1)</b>
appInfo:
  my-app1: <i class="conum" data-value="2"></i><b>(2)</b>
    WINDOWS: "build/windows/app-info.yaml" <i class="conum" data-value="3"></i><b>(3)</b>
    LINUX: "build/linux/app-info.yaml"
  my-app2:
    WINDOWS: "scripts/app2/app-info.yaml" <i class="conum" data-value="4"></i><b>(4)</b>
    LINUX: "scripts/app2/app-info.yaml"</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>A unique <strong>Tag</strong> to identify the product version. There is no requirement for any version-like syntax here, it can be basically anything. It should just be unique per <strong>Product Version</strong>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The <strong>Application</strong> ID must match the one used in <code>product-info.yaml</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>You may have different binaries for a single application depending on the target operating system. It is not required to provide every application for every operating system. You can just leave out operating systems you don&#8217;t care about.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>You can also use the exact same <strong>Application</strong> directory and <code>app-info.yaml</code> to satisfy multiple operating system targets for one <strong>Application</strong>.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_application_template_yaml">application-template.yaml</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is no actual requirement for the file to be named <code>application-template.yaml</code> as it is referenced from the <code>product-info.yaml</code> by relative path anyway. Multiple <strong>Application Template</strong> YAML files can exist and be referenced by <code>product-info.yaml</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This file defines a single <strong>Application Template</strong>. A <a href="#_product_info_yaml"><code>product-info.yaml</code></a> can reference multiple templates, from which the user can choose.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="yaml">id: server-with-sleep <i class="conum" data-value="1"></i><b>(1)</b>
application: server-app
name: "Server With Sleep"
description: "Server application which sleeps before exiting"

variables: <i class="conum" data-value="2"></i><b>(2)</b>
  - uid: sleep-timeout
    name: "Sleep Timeout"
    description: "The amount of time the server application should sleep"
    defaultValue: 60
    suggestedValues:
    - '60'
    - '120'

processControl: <i class="conum" data-value="3"></i><b>(3)</b>
  startType: MANUAL_CONFIRM
  keepAlive: false
  noOfRetries: 3
  gracePeriod: 30000
  attachStdin: true

startParameters: <i class="conum" data-value="4"></i><b>(4)</b>
- uid: param.sleep
  value: "{{T:sleep-timeout}}"</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>An <strong>Application Template</strong> must have an ID. This can be used to reference it from an <strong>Instance Template</strong>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A template can define (and use) template variables which are mandatory input by the user when using the template. A template variable can be referenced in parameter value definitions using the <code>{{T:varname}}</code> syntax. If the parameter value is numeric, you can also use simple arithmetic operations on the template variable like <code>{{T:varname:+10}}</code> which will add 10 to the numeric value of the template variable.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A template can define arbitrary process control parameters to further control the default process control settings.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Start command parameters are referenced by their UID, defined in <a href="#_app_info_yaml"><code>app-info.yaml</code></a>. If a value is given, this value is applied. If not, the default value is used. If a parameter is optional, it will be added to the configuration if it is referenced in the template, regardless of whether a value is given or not.</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_instance_template_yaml">instance-template.yaml</h4>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is no actual requirement for the file to be named <code>instance-template.yaml</code> as it is referenced from the <code>product-info.yaml</code> by relative path anyway. Multiple <strong>Instance Template</strong> YAML files can exist and be referenced by <code>product-info.yaml</code>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This file defines a single <strong>Instance Template</strong>. A <a href="#_product_info_yaml"><code>product-info.yaml</code></a> can reference multiple templates, from which the user can choose.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="yaml">name: Default Configuration <i class="conum" data-value="1"></i><b>(1)</b>
description: "Creates an instance with the default server and client configuration"

variables: <i class="conum" data-value="2"></i><b>(2)</b>
  - uid: sleep-timeout
    name: "Sleep Timeout"
    description: "The amount of time the server application should sleep"
    defaultValue: 60

groups: <i class="conum" data-value="3"></i><b>(3)</b>
- name: "Server Apps"
  description: "All server applications"

  applications:
  - application: server-app
    name: "Server No Sleep"
    description: "Server application which immediately exits"
  - template: server-with-sleep <i class="conum" data-value="4"></i><b>(4)</b>
  - application: server-app <i class="conum" data-value="5"></i><b>(5)</b>
    name: "Server With Sleep"
    description: "Server application which sleeps before exiting"
    processControl:
      startType: MANUAL_CONFIRM
    startParameters: <i class="conum" data-value="6"></i><b>(6)</b>
    - uid: param.sleep
      value: "{{T:sleep-timeout}}"
- name: "Client Apps"
  type: CLIENT <i class="conum" data-value="7"></i><b>(7)</b>
  description: "All client applications"

  applications:
  - application: client-app
    description: "A default client application."</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Each <strong>Instance Template</strong> has a name and a description, which are shown on the <strong>Instance Template</strong> Wizard.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>A template can define (and use) template variables which are mandatory input by the user when using the template. A template variable can be referenced in parameter value definitions using the <code>{{T:varname}}</code> syntax. If the parameter value is numeric, you can also use simple arithmetic operations on the template variable like <code>{{T:varname:+10}}</code> which will add 10 to the numeric value of the template variable.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>A template defines one or more groups of applications to configure. Each group can be assigned to a physical node available on the target system. Groups can be skipped by not assigning them to a node, so they provide a mechanism to provide logical groups of processes (as result of configuring the applications) that belong together and might be optional. It is up to the user whether a group is mapped to a node, or not. Multiple groups can be mapped to the same phsysical node.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><strong>Instance Templates</strong> can reference <strong>Application Templates</strong> by their <code>id</code>. The <strong>Instance Templates</strong> can further refine an <strong>Application Template</strong> by setting any of the valid application fields in addition to the template reference.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>A template group contains one or more applications to configure, which each can consist of process control configuration and parameter definitions for the start command of the resulting process - exactly the same fields are valid as for <strong>Application Tempaltes</strong> - except for the <code>id</code> which is not required.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Start command parameters are referenced by their UID, defined in <a href="#_app_info_yaml"><code>app-info.yaml</code></a>. If a value is given, this value is applied. If not, the default value is used. If a parameter is optional, it will be added to the configuration if it is referenced in the template, regardless of whether a value is given or not.</td>
</tr>
<tr>
<td><i class="conum" data-value="7"></i><b>7</b></td>
<td>A template group can have either type <code>SERVER</code> (default) or <code>CLIENT</code>. A group may only contain applications of a compatible type, i.e. only <code>SERVER</code> applications in <code>SERVER</code> type group. When applying the group to a node, applications will be instantiated to processes according to their supported OS and the nodes physical OS. If a <code>SERVER</code> application does not support the target nodes OS, it is ignored.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>An instance template will be presented to the user when visiting an <a href="#_instance_templates">Empty Instance</a>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_building_a_product">Building a Product</h3>
<div class="paragraph">
<p>Now that you have a well-defined <strong>Product</strong> with one or more <strong>Applications</strong>, you will want to build/package that <strong>Product</strong> to be usable with <strong>BDeploy</strong>.</p>
</div>
<div class="sect3">
<h4 id="_via_zip_file_and_web_ui">Via ZIP File and Web UI</h4>
<div class="paragraph">
<p>The well-defined <strong>Product</strong> directory including <strong>Applications</strong> can be zipped and imported directly from the web interface.</p>
</div>
<div class="paragraph">
<p>The following conditions must be fulfilled for a successful import:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>ZIP files must be self-contained, e.g. only relative paths are allowed and no leaving of the zipped structure via ".." paths.</p>
</li>
<li>
<p>YAML files must follow standard naming (product-info.yaml).</p>
</li>
<li>
<p>External dependencies must either be included in the ZIP or already be available in the <strong>Instance Group</strong>. <strong>Software Repositories</strong> are not (yet) supported.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_via_cli">Via CLI</h4>
<div class="paragraph">
<p>Once you have a <code>product-info.yaml</code> with it&#8217;s <code>product-version.yaml</code> and all the <code>app-info.yaml</code> files in their respective <strong>Application</strong> directories, you can use the CLI to import the product as a single piece.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>bdeploy product</code> to import the product by specifying a local <strong>BHive</strong> and the <code>product-info.yaml</code> to import from.</p>
</li>
<li>
<p>Use <code>bhive push</code> to push the resulting <strong>Product Manifest</strong> from the local <strong>BHive</strong> to an <strong>Instance Group</strong> on a remote <strong>BDeploy</strong> server.</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="_via_eclipse_tea">Via Eclipse TEA</h4>
<div class="paragraph">
<p><strong>BDeploy</strong> provides integration into <a href="https://www.eclipse.org/tea/">Eclipse TEA</a>. Using this integration, you can easily export <strong>Eclipse RCP</strong> based products as <strong>Applications</strong> and bundle them into a custom <strong>Product</strong>.</p>
</div>
<div class="paragraph">
<p>Once you have required files, select <span class="menuseq"><b class="menu">TEA</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">TEA Build Library</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Build BDeploy Product&#8230;&#8203;</b></span>. You will be prompted which <strong>Product</strong> to build and where to put the resulting product. You can choose to create a self-contained ZIP, or to push deltas to a selected server.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/TEA_build_product.png"><img src="images/TEA_build_product.png" alt="TEA Integration Product Build" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>You can configure multiple servers by using the <b class="button">Add</b>, <b class="button">Delete</b> and <b class="button">Edit</b> buttons.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/TEA_edit_server.png"><img src="images/TEA_edit_server.png" alt="TEA BDeploy Server configuration" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Enter a description and a URL. You will then be able to use the <b class="button">Login</b> button to create a token for the server.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/TEA_login.png"><img src="images/TEA_login.png" alt="TEA BDeploy Login" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Now you can use the <b class="button">Load Groups</b> to fetch a list of existing instance groups from the server to choose from. Finally, use the verity button to check whether the entered information is correct.</p>
</div>
<div class="paragraph">
<p>When confirming the build dialog, on first run you will be prompted to login to the Software Repositories <strong>BDeploy</strong> server configured in the TEA <strong>BDeploy</strong> preferences.</p>
</div>
<div class="paragraph">
<p>Since product builds are stored in the workspace, you can choose to re-push a previous build of the product (to the same or another server). Select <span class="menuseq"><b class="menu">TEA</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">TEA Build Library</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Push BDeploy Product&#8230;&#8203;</b></span> to do so. You will be presented a list of available local product versions and the configured <strong>BDeploy</strong> servers.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/TEA_push_product.png"><img src="images/TEA_push_product.png" alt="TEA Integration Product Push" width="480"></a>
</div>
</div>
<div class="sect4">
<h5 id="_products_yaml"><code>products.yaml</code></h5>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
There is no actual requirement for the file to be named <code>products.yaml</code>. This is just the default, but you can specify another name in the Eclipse TEA preferences.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This file is required and lists the <code><a href="#_product_build_yaml">product-build.yaml</a></code> files which are available to the integration.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="yaml">products:
  "Product One": "prod-1-build.yaml"
  "Product Two": "prod-2-build.yaml"</code></pre>
</div>
</div>
<div class="paragraph">
<p>The path to the <code>products.yaml</code> has to be configured in the <strong>Eclipse TEA</strong> preferences</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/TEA_preferences_products.png"><img src="images/TEA_preferences_products.png" alt="TEA Integration Products Preference" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The preferences also allow to configure a <strong>BDeploy</strong> server whos <a href="#_software_repositories">Software Repositories</a> are used during resolution of <a href="#_runtime_dependencies">Runtime Dependencies</a>. You will be asked to log into this server once when starting a product build.</p>
</div>
</div>
<div class="sect4">
<h5 id="_product_build_yaml"><code>product-build.yaml</code></h5>
<div class="paragraph">
<p>This file references a <code><a href="#_product_info_yaml">product-info.yaml</a></code> file and describes how to build the actual applications referenced in the <code>product-info.yaml</code>.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="yaml">productInfoYaml: my-prod-info.yaml

applications:
  - name: my-app1
    type: RCP_PRODUCT
    includeOs: [WINDOWS, LINUX]
    application:
      product: App1ProdBuild

  - name: my-app2
    type: RCP_PRODUCT
    includeOs: [WINDOWS, LINUX]
    application:
      product: App2ProdBuild</code></pre>
</div>
</div>
<div class="paragraph">
<p>The value for <code>applications.application.product</code> is <strong>Eclipse TEA</strong> specific and references the <strong>Eclipse TEA</strong> product <em>alias</em> property.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_variable_expansion">Variable Expansion</h3>
<div class="paragraph">
<p><strong>BDeploy</strong> provides a mechanism for variable expansion. There is a set of predefined possibilities. Currently, it is not possible to define your own variables, only the predefined set is available. Variable expansion can happen on the following:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Launcher path specified in <a href="#_app_info_yaml"><code>app-info.yaml</code></a>.</p>
</li>
<li>
<p>Any parameter value. Either user-set value or the <code>defaultValue</code> specified in <a href="#_app_info_yaml"><code>app-info.yaml</code></a>.</p>
</li>
<li>
<p>Any configuration file content.</p>
</li>
<li>
<p>Most of the <a href="#_supported_endpoints_http_attributes">HTTP Endpoints</a> attributes.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Any of the above will be processed <em>as late as possible</em>, i.e. on the target node, right before writing the final content to the target directories.</p>
</div>
<div class="paragraph">
<p>The general syntax for variables is <code>{{TYPE:VARNAME:SUBVAR}}</code>. There are various types, usually denoted by a single character. The following section gives an overview of types, variables, and possible sub-variables.</p>
</div>
<div class="sect3">
<h4 id="_m_manifest_reference">M: Manifest Reference</h4>
<div class="paragraph">
<p>Used whenever it is required to get the absolute installation path to another manifests path on the target system. The name of the variable indicates the manifest which should be references. An optional tag - separated with a ':' - can be added to refer to a specific version.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">{{M:&lt;Name of Manifest&gt;:&lt;Optional Manifest Tag&gt;}}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{M:openjdk/jre8}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expands to the absolute path where the OpenJDK manifest is installed on the server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{M:SELF}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expands to the absolute path where the manifest is installed on the server which contains the <code>app-info.yaml</code> for this application. This substitution shortcut is only supported in <code>app-info.yaml</code> files.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_p_deployment_path">P: Deployment Path</h4>
<div class="paragraph">
<p>Used to expand to one of the special directories that are defined.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">{{P:&lt;PATH_ID&gt;}}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{P:CONFIG}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory where all configuration files are stored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{P:BIN}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory where all binaries are are stored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{P:RUNTIME}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory with runtime data (e.d. stdout/stderr capture files) is stored.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{P:DATA}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Directory shared by multiple deployments of the same instance.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_v_parameter_value">V: Parameter Value</h4>
<div class="paragraph">
<p>Used to reference a parameter within the same application or withing any other application from the same instance. Typically used when one application publishes a service on a specific port (<em>server</em>) and other applications (<em>clients</em>) should then connect to this port. The configuration of the <em>client</em> applications would then refer to the port of the <em>server</em> application. Thus when changing the port only the configuration of the <em>server</em> application must be adopted.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">{{V:&lt;PARAM_ID&gt;}} - Refers to a parameter defined in the same application
{{V:&lt;APP_NAME&gt;:&lt;PARAM_ID&gt;}} - Refers to a parameter defined in the application with the given name</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{V:my.param.uid}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes the value from the <em>my.param.uid</em> parameter defined in the same application.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{V:MyServer:my.param.uid}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Takes the value from the parameter <em>my.param.uid</em> that is defined in the <em>MyServer</em> application.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Beware that changing the name of an application will break the parameter reference mechanism. There is no mechanism that automatically adapts the configuration of applications which refer to values of other applications. This must be done manually if required.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_i_instance_value">I: Instance Value</h4>
<div class="paragraph">
<p>Used to expand to values related to the instance containing the parameter&#8217;s process.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">{{I:&lt;VAR&gt;}}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{I:SYSTEM_PURPOSE}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The purpose of the instance in upper case letters. (PRODUCTIVE, TEST, DEVELOPMENT)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{I:UUID}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID of the instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{I:NAME}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the instance</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{I:PRODUCT_ID}}</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Name of the 'MANIFEST' keys name of the configured product</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{I:PRODUCT_TAG}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The tag (i.e. 'version') of the configured product</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_a_application_value">A: Application Value</h4>
<div class="paragraph">
<p>Used to expand to values related to the application containing the parameter&#8217;s.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">{{A:&lt;VAR&gt;}}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{A:UUID}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UUID of the application</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{A:NAME}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Name of the application</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_h_minion_properties">H: Minion Properties</h4>
<div class="paragraph">
<p>Used to expand to properties of the minion where the application is deployed.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">{{H:&lt;VAR&gt;}}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{H:HOSTNAME}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expands to the hostname of the target minion where the application is deployed.</p></td>
</tr>
</tbody>
</table>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Beware that due to the nature of variable expansion (the point in time this happens), <code>HOSTNAME</code> may not be what you expect, <em>especially</em> on global parameters used by multiple processes (it can be a different hostname for each process, if they are configured to different nodes). Even more precaution is required when using <code>HOSTNAME</code> on client applications, as it will expand to the <em>clients</em> hostname.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_operating_system">Operating System</h4>
<div class="paragraph">
<p>Enables conditional output of text based on the current operating system. The name of the variable refers to the name of the operating system. Using
this variable allows the usage of different arguments for different operating systems while still using a single YAML file.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">{{OSNAME:&lt;conditional output&gt;}}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{LINUX:java}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expands to <em>java</em> on on <em>Linux</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{WINDOWS:java.exe}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expands to <em>java.exe</em> on on <em>Windows</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">java{{WINDOWS:.exe}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expands to <em>java</em> on Linux and <em>java.exe</em> <em>Windows</em></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_environmental_values">Environmental Values</h4>
<div class="paragraph">
<p>Enables access to environmental variables defined in the operating system. The name of the variable refers to the name of the environmental variable.</p>
</div>
<div class="literalblock">
<div class="content">
<pre class="nowrap">{{ENV:NAME}}
{{DELAYED:ENV:NAME}}</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 85.7143%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{ENV:MY_VARIABLE}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expands to the value of the environmental variable when the application is <strong>installed</strong> on the node or client.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">{{DELAYED:ENV:MY_VARIABLE}}</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Expands to the value of the environmental variable when the application is <strong>launched</strong> on the node or client.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Variables are replaced with their actual values when the process is installed on the target minion node. This might not always be desired.
Especially for client applications it can be useful to do the actual replacing when the process is launched. This is can be achieved by prefixing
the actual variable with the <strong>DELAYED</strong> prefix. This enables that different users of the client application are getting different parameter values
depending on the value of the environmental variable.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_runtime_dependencies">Runtime Dependencies</h3>
<div class="paragraph">
<p>As you saw before (<code><a href="#_app_info_yaml">app-info.yaml</a></code>), <strong>Applications</strong> can declare dependencies to third-party <strong>Manifests</strong>. These <strong>Manifests</strong> are hosted in <strong>Software Repositories</strong> on the <strong>BDeploy</strong> Server.</p>
</div>
<div class="paragraph">
<p>To make them available on the server, you need to:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Use <code>bhive import</code> to import the directory containing the third-party software into a local <strong>BHive</strong>.</p>
</li>
<li>
<p>Use <code>bhive push</code> to push the created <strong>Manifest</strong> to the <strong>Software Repository</strong> of your choice.</p>
</li>
</ul>
</div>
<div class="sect3">
<h4 id="_manifest_naming">Manifest Naming</h4>
<div class="paragraph">
<p>Third party software <strong>Manifests</strong> can have basically any name. If you want to provide different <strong>Manifests</strong> per target operating system though, you will have to follow a simple naming rule: append the operating system name to the <strong>Manifest</strong> name part, e.g.:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>my/external/software/windows:1.0.0</code></p>
</li>
<li>
<p><code>my/external/software/linux:1.0.0</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It can then be referenced by an <code>app-info.yaml</code> using the short-hand syntax <code>my/external/software:1.0.0</code> and <strong>BDeploy</strong> will choose the correct one depending on the target operating system.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_runtime_dependency_packaging">Runtime Dependency Packaging</h3>
<div class="paragraph">
<p><strong>BDeploy</strong> will always make sure that your products are self contained. This means that <a href="#_runtime_dependencies">Runtime Dependencies</a> are packaged with the product data at build time. The result is a product which contains all dependencies. This also means that pushing a product to a target server does not require <strong>any</strong> prerequisites on that target server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Included runtime dependencies will not show up on the target server&#8217;s Web UI anywhere. Especially there is no <a href="#_software_repositories">Software Repository</a> created automatically for any third-party software. It is simply included in the product.
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_software_repositories">Software Repositories</h3>
<div class="paragraph">
<p>The <strong>Software Repositories</strong> page allows maintenance of external software that a specific product requires. A <strong>Software Repository</strong> shares its namespace with <strong>Instance Groups</strong>, which means that the unique name of a <strong>Software Repository</strong> must not collide with any name of a <strong>Software Repository</strong> or <strong>Instance Group</strong>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_SWRepos.png"><img src="images/BDeploy_SWRepos.png" alt="Software Repositories" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The available software packages can be viewed and downloaded if required. Please note that uploading a new software package requires a special data structure. Simply uploading an arbitrary ZIP file is not working as the required <strong>Metadata</strong> is missing.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_SWRepo_Ext_Software.png"><img src="images/BDeploy_SWRepo_Ext_Software.png" alt="Software Repository with External Software" width="480"></a>
</div>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_SWRepo_Ext_Software_Details.png"><img src="images/BDeploy_SWRepo_Ext_Software_Details.png" alt="Software Details" width="480"></a>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_experts">Experts</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter contains additional information for expert users, administrators of the system as well as those that want to use the CLI for features that the UI does not provide.</p>
</div>
<div class="sect2">
<h3 id="_administration">Administration</h3>
<div class="paragraph">
<p>There are several components in the Web UI which allow maintenance of <strong>BDeploy</strong>. These are not to be used during <em>normal</em> operation by users. They <em>are</em> required during setup and to maintain current software versions of <strong>BDeploy</strong> itself if not done using the <code><a href="#_bdeploy_cli">bdeploy remote-master</a></code> CLI.</p>
</div>
<div class="sect3">
<h4 id="_general_settings">General Settings</h4>
<div class="paragraph">
<p><em>Gravatar</em> support can be enabled in the general <em>Look &amp; Feel</em> settings.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_General_Look_And_Feel.png"><img src="images/BDeploy_General_Look_And_Feel.png" alt="BDeploy Look &amp; Feel Settings" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_authentication">Authentication</h4>
<div class="paragraph">
<p><strong>BDeploy</strong> supports both built-in and external authentication mechanims. The built-in user authentication can be disabled completely in the settings.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Authentication_Local.png"><img src="images/BDeploy_Authentication_Local.png" alt="BDeploy Authentication Settings" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>On the <strong>LDAP</strong> tab, you can configure a list of LDAP servers which should also be queried when authenticating a user.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_LDAP_Servers.png"><img src="images/BDeploy_LDAP_Servers.png" alt="BDeploy LDAP Servers" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>You can use the up and down arrows to control the order in which LDAP servers are queried for users that log on.</p>
</div>
<div class="paragraph">
<p><strong>BDeploy</strong> uses simple bind to authenticate users. First, a simple bind is made with a configured <em>Server User</em>. This user must have permissions to list other users that should be able to log into <strong>BDeploy</strong>. This bind is used to query for a user where the <code>Result User Field</code> matches the given (at login) user name. This can be any field like <code>user</code>, <code>sAMAccountName</code>, or even <code>mail</code> if you want users to log on using their E-Mail Address. Once the user to log on is found, it&#8217;s distinguished name is used to perform another simple bind using the login-provided password. Once this succeeds the user is authenticated and an according record is created in <strong>BDeploy</strong>. From that point on, permissions can be granted to this user.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_LDAP_Server_Config.png"><img src="images/BDeploy_LDAP_Server_Config.png" alt="BDeploy LDAP Server Configuration" width="480"></a>
</div>
</div>
<div class="sect4">
<h5 id="_ldap_server_properties">LDAP Server Properties</h5>
<div class="paragraph">
<p>The following properties can be configured for each LDAP Server:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Property</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server URL</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The URL of the LDAP server. Both <code>ldaps://</code> (with a proper certificate on the server) and <code>ldap://</code> are supported. <code>ldaps://</code> should be preferred where possible. Self-signed certificates are currently not configurable inside <strong>BDeploy</strong> (although they can be configure on the operating system).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server User</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The user which is used to query other users on the LDAP server</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Server Password</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The password for the <em>Server User</em> which is used to query other users on the LDAP server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Account Base</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Root of the LDAP tree containing all user accounts to query. Typically in the form of <code>dc=domain,dc=com</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Account Pattern</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A partial LDAP query expression. Multiple filters can be written one after another. The final LDAP query is built by prepending <code>(&amp;</code>, and appending a filter which queries the configures <em>Result User Field</em> for the given user. Thie means that a pattern <code>(field1=value1)(field2=value2)</code> will result in a query like <code>(&amp;(field1=value1)(field2=value2)(sAMAccountName=&lt;GIVEN USER&gt;))</code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result User Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the field which must match the given username when querying for the user.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result Full Name Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field which should be used as source for the <em>Full Name</em> of the user, which is used as a display name in <a href="#_user_accounts">User Accounts</a> management.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Result E-Mail Field</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The field which should be used as source for the users <em>E-Mail Address</em>. This is used for instance to query <em>Gravatar</em> if <em>Gravatar</em> support has been enabled in the <a href="#_general_settings">General Settings</a>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_user_accounts">User Accounts</h4>
<div class="paragraph">
<p>The <strong>User Accounts</strong> dialog lists all users known in the system, regardless of whether they are local users or LDAP users.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_UserAccounts.png"><img src="images/BDeploy_UserAccounts.png" alt="BDeploy User Accounts" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Use the <b class="button">+</b> button to create a local user.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_UserAccounts_Add.png"><img src="images/BDeploy_UserAccounts_Add.png" alt="BDeploy User Accounts" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The pull-down menu at the end of each table entry contains actions for modifying a user. The <b class="button">Edit</b> button opens a popup for editing the display name and the email address of a user.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_UserAccounts_Edit.png"><img src="images/BDeploy_UserAccounts_Edit.png" alt="BDeploy User Accounts" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>The global permissions can be changed using the <b class="button">Global Permissions</b> button in the pull-down menu.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_UserAccounts_SetGlobalPermissions.png"><img src="images/BDeploy_UserAccounts_SetGlobalPermissions.png" alt="BDeploy User Accounts" width="480"></a>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 75%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Permission</th>
<th class="tableblock halign-left valign-top">Meaning</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>READ</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Only those <strong>Instance Groups</strong> for which a user has <strong>READ</strong> permission are displayed. Users with global <strong>READ</strong> permission can see all <strong>Instance Groups</strong>.
<strong>READ</strong> permission allows the user to read the <strong>Instance Group</strong> without making any modifications.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>WRITE</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>WRITE</strong> permission allows a user to maintain the contents of an <strong>Instance Group</strong> without modifying the <strong>Instance Group</strong> itself. The <strong>WRITE</strong> permission contains the <strong>READ</strong> permission. Users with global <strong>WRITE</strong> permission can maintain all <strong>Instance Groups</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>ADMIN</strong></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The <strong>ADMIN</strong> permission contains the <strong>WRITE</strong> and <strong>READ</strong> permission and allows full access to an <strong>Instance Group</strong>. Users with global <strong>ADMIN</strong> permission have full access to all <strong>Instance Groups</strong> and additionally to the <strong>BDeploy</strong> system configuration.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The <b class="button">Set Active</b> and <b class="button">Set Inactive</b> actions are used to disable an account without deleting it i.e. to activate it again.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_UserAccounts_Inactive.png"><img src="images/BDeploy_UserAccounts_Inactive.png" alt="BDeploy User Accounts" width="480"></a>
</div>
</div>
</div>
<div class="sect3">
<h4 id="_bdeploy_update">BDeploy Update</h4>
<div class="paragraph">
<p>The <strong>BDeploy Update</strong> page from the <strong>Administration</strong> menu offers a mechanism to upload new <strong>BDeploy</strong> software versions, deploy these versions (<em>upgrade</em> and <em>downgrade</em> possible) to the running <strong>BDeploy</strong> <em>master</em> and attached <em>slaves</em>.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_System_With_Launcher.png"><img src="images/BDeploy_System_With_Launcher.png" alt="BDeploy System Software" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>It also offers a way to <em>upload</em> and also to <em>download</em> <strong>BDeploy Launcher</strong> binaries. These binaries are required when <a href="#_app_info_yaml"><code>CLIENT</code> <strong>Applications</strong></a> are configured. Use the <b class="button">Upload</b> button to upload new <strong>BDeploy</strong> versions from the binary distributions (<em>ZIP</em>).</p>
</div>
<div class="paragraph">
<p>The page can also be used to download the binaries of <strong>BDeploy</strong> (e.g. to setup additional <em>slaves</em>) and the <strong>BDeploy Launcher</strong> binaries (e.g. for manual setup of the <strong>BDeploy Launcher</strong> on client PCs, see <a href="#_client_applications">Client Applications</a>).</p>
</div>
</div>
<div class="sect3">
<h4 id="_manual_cleanup">Manual Cleanup</h4>
<div class="paragraph">
<p>You can use the <strong>Manual Cleanup</strong> page from the <strong>Administration</strong> menu to trigger a manual cleanup of stuff that is not needed any more. There is no need to trigger this manually as a job is scheduled that performs the exact same operation every night:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 40%;">
<col style="width: 60%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Target</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Instances</strong> with <em>Auto Uninstallation</em> enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the option <em>Automatic Uninstallation</em> is enabled on an <strong>Instance</strong>, <strong>Instance Versions</strong> that are older than the activated and the previously activated <strong>Instance Version</strong> are uninstalled automatically.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><strong>Instance Groups</strong> with <em>Automatic Cleanup</em> enabled</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">If the option <em>Auto Cleanup</em> is enabled on an <strong>Instance Group</strong>, old <strong>Product Versions</strong> that are no longer in use by <strong>Instances</strong> of this <strong>Instance Group</strong> are deleted automatically. To avoid that a <strong>Product</strong> vanishes completely, the very latest <strong>Product Version</strong> always remains.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slave</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Delete <strong>Manifests</strong> that are not known by the master</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slave</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Keep two <strong>BDeploy Launcher</strong> versions, delete all older versions.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Slave</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove unused directories and files in the deployment (including pooled applications), download and temp directory.</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>The dialog can be used to immediately trigger a cleanup and to reviewing of the actions performed <em>before</em> doing so.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Cleanup.png"><img src="images/BDeploy_Cleanup.png" alt="BDeploy Cleanup Page" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Press the <b class="button">Calculate Cleanup Actions</b> button to perform cleanup calculation. The result will be groups of actions to be performed on <strong>Instance Groups</strong> or <strong>Slaves</strong>. The result contains only <strong>Instance Groups</strong> and <strong>Slaves</strong> for which actions are actually calculated, i.e. empty lists are hidden. If no action is calculated at all, a corresponding message is displayed.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Cleanup_Actions.png"><img src="images/BDeploy_Cleanup_Actions.png" alt="BDeploy Cleanup Actions" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>Press the <b class="button">Execute all Actions</b> button to actually perform the calculated actions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The dialog automatically resets itself after a certain timeout. This is to prevent execution of too old actions which might no longer be valid.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_hive_browser">Hive Browser</h4>
<div class="paragraph">
<p>The <strong>Hive Browser</strong> from the <strong>Administration</strong> menu is an internal tool for administrative purposes. It allows viewing and browsing the internals of the <strong>BDeploy</strong> storage. The drop-down at the top of the dialog is used to switch between the available hives. The <em>default</em> hive is the internal storage where metadata about users and outer hives are stored. The actual data is stored in the individual hives itself.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
It has the power to destroy <em>everything</em> - use with extreme caution.
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="_hive_audit_logs">Hive Audit Logs</h4>
<div class="paragraph">
<p>The Hive Audit Log browser allows to view all audit logs on any of the <strong>BHive</strong> managed by the server.</p>
</div>
</div>
<div class="sect3">
<h4 id="_audit_log">Audit Log</h4>
<div class="paragraph">
<p>The system Audit Log browser allows to view the master servers main audit log, which includes information about tools run on the root directory, as well as every request made to the APIs.</p>
</div>
</div>
<div class="sect3">
<h4 id="_metrics">Metrics</h4>
<div class="paragraph">
<p>This dialog provides a quick way to investigate potential performance issues in the server itself by providing access to the in-memory metrics kept track by the server for all actions and requests performed.</p>
</div>
<div class="paragraph">
<p>The <code>SERVER</code> metrics will show various system information about the Java Virtual Machine of the master hosting the Web UI.</p>
</div>
</div>
<div class="sect3">
<h4 id="_log_level">Log Level</h4>
<div class="paragraph">
<p>You can adjust the log level of the Web UI (i.e. logging in the Browser Console) using the drop down at the bottom of the BDeploy main menu. The default value depends on whether the application is started in development (i.e. from VSCode) or production mode.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Main_Menu.png"><img src="images/BDeploy_Main_Menu.png" alt="BDeploy Main Menu" width="480"></a>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_command_line_interface">Command Line Interface</h3>
<div class="paragraph">
<p><strong>BDeploy</strong> provides a rich CLI which allows automating most interactions with <strong>BDeploy</strong>, e.g. for use in build pipelines, etc.</p>
</div>
<div class="paragraph">
<p>Each of the binaries provides a set of <em>commands</em> along with available <em>options</em>. This chapter describes the available <em>commands</em>. The <em>options</em> are well-described when calling the according <em>command</em> with the <code>--help</code> <em>option</em>.</p>
</div>
<div class="sect3">
<h4 id="_bdeploy_cli">BDeploy CLI</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 10%;">
<col style="width: 65%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Command</th>
<th class="tableblock halign-left valign-top">Remote</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>bhive</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Wraps around to the <a href="#_bhive_cli">BHive CLI</a>. Can be used to access <strong>BHive</strong> CLI commands if ther <strong>BHive</strong> stand-alone binaries are not available. Usage: <code>bdeploy bhive &lt;command&gt;</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>login</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manages login sessions on remote servers. This command eliminates the need to manage tokens yourself. Login sessions are managed per user, can be created, switched and removed. Validity of the login session is the same as for the Web UI. Subsequent commands will use the configured remote login session to perform remote communication.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>cleanup</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manage the schedule at which the <em>master</em> performs background cleanup operations on all <em>slaves</em> (including himself).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p><code>init</code></p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Initializes a <em>root</em> directory for use with either the <code>slave</code> or <code>master</code> commands.</p>
<p class="tableblock">The <code>init</code> command also generates the initial <em>security token</em>, see <a href="#_security">Security</a>. It is suggested to use the <code>--tokenFile</code> parameter if the token should be stored for later use.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>hostname</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows 'renaming' of the minion. The <code>init</code> command stores the given hostname, used later on for connections to self and also for variable expansion. If the hostname changed or is no longer valid, the <code>hostname</code> tool can update all relevant data.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>instance</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Tooling to <strong>export</strong> (to <em>ZIP</em>) and <strong>import</strong> (from <em>ZIP</em>) <strong>Instances</strong> locally.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>master</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Runs the <strong>BDeploy</strong> <em>minion</em> in <em>master</em> mode. Requires a root directory initialized with the <code>init</code> command.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
A <em>master</em> is always a <em>slave</em> as well. The <em>master</em> just has the additional capability to control other <em>slaves</em>, and provides the configuration Web UI.
</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>product</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Mixed</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">List or create <strong>Products</strong> locally. Fetches required dependencies from the given remote <strong>BDeploy</strong> server. Has the ability to push the resulting <strong>Product</strong> to the target <strong>BDeploy</strong> server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-deployment</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Manage <strong>Instance</strong> deployment (<em>install</em>, <em>activate</em>, <em>uninstall</em>, <em>updateTo</em> (product version)) on a remote <strong>BDeploy</strong> server.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
The <code>--updateTo</code> command will only work if the new product version can be updated to without manual changes. If for example a mandatory parameter is added, or a configured application is removed from the product, the update will fail.
</td>
</tr>
</table>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-group</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manage <strong>Instance Groups</strong> on a remote <strong>BDeploy</strong> server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-master</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query and manage system information on a remote <strong>BDeploy</strong> server. Allows to update both the <strong>BDeploy</strong> system software as well as the <strong>BDeploy</strong> launcher binaries.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-process</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query and manage application processes managed by <strong>BDeploy</strong> on a remote <strong>BDeploy</strong> server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>remote-repo</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Query and manage <strong>Software Repositories</strong> on a remote <strong>BDeploy</strong> server.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>slave</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Runs the <strong>BDeploy</strong> <em>minion</em> in <em>slave</em> mode. Requires a root directory initialized with the <code>init</code> command.</p>
</div>
<div class="paragraph">
<p>Also used to register a <em>slave</em> with the <em>master</em>. For this, the <code>slave</code> command is run on the <em>master</em> with the <code>--add</code> option.</p>
</div></div></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>storage</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manages available <em>storage locations</em>. A <em>storage location</em> is a folder where the <strong>BDeploy</strong> <em>master</em> puts the <strong>BHives</strong> required to store data for <strong>Instance Groups</strong> and <strong>Software Repositories</strong>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>token</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows generation of new <em>access tokens</em>, see <a href="#_security">Security</a>.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>certificate</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows to change the certificate used by the <strong>BDeploy</strong> server for token signing and HTTPS traffic encryption.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>user</code></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manages local users for a <em>master</em>. These users can be used to authenticate through the Web UI login dialog.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>set-mode</code></p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_bhive_cli">BHive CLI</h4>
<div class="paragraph">
<p><strong>BHive</strong> is the underlying storage used by <strong>BDeploy</strong>. <strong>BDeploy</strong> serves <strong>BHives</strong> for all minions (<em>master</em> and <em>slave</em>), and has additional <strong>BHives</strong> per <strong>Instance Group</strong> and <strong>Software Repository</strong> on the <em>master</em>.</p>
</div>
<div class="paragraph">
<p><strong>BHive</strong> itself is does not know about <strong>BDeploy</strong>, it is 'just' a dumb storage backend (which is responsible for de-duplicated, distributed, fail-tolerant (failure-recoverable) storage of file contents).</p>
</div>
<div class="paragraph">
<p>Much like Git, <strong>BHive</strong> only knows two commands that actually perform remote communication: <code>fetch</code> and <code>push</code>. All other commands are performing their work locally.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 10%;">
<col style="width: 65%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Command</th>
<th class="tableblock halign-left valign-top">Remote</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>export</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads a <strong>Manifest</strong> from the given <strong>BHive</strong> and writes it&#8217;s content to a given target folder.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fetch</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fetches the given <strong>Manifests</strong> from a given remote <strong>BHive</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fsck</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><div class="content"><div class="paragraph">
<p>Performs a file system check (<em>fsck</em>). This involves resolving all inter-<strong>Manifest</strong> dependencies, as well as re-hashing all objects in the underlying storage to assert that all objects in the storage are valid.</p>
</div>
<div class="paragraph">
<p>Also allows to fix found errors (by deletion). After this, missing <strong>Manifests</strong> must be re-pushed from a <strong>BHive</strong> which still has the required objects.</p>
</div></div></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>import</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Import a given folder into a given <strong>BHive</strong> and associate the given <strong>Manifest</strong> key with it.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>manifest</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Manage existing <strong>Manifests</strong> in a given <strong>BHive</strong>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>prune</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Remove unreferenced objects from the given <strong>BHive</strong> to free up disc space.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>push</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Push the given <strong>Manifests</strong> to the given remote <strong>BHive</strong></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>serve</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serves one or more given <strong>BHives</strong> over the network. The same thing as <strong>BDeploy</strong> does internally, provided as CLI tool for maintenance reasons.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>token</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Allows generation of new <em>access tokens</em>, see <a href="#_security">Security</a>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>tree</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Read and diff <strong>Manifests</strong> from the given <strong>BHive</strong>. Allows to compare the contents of <strong>Manifests</strong>, view differences and the estimated data transfer required to perform a delta 'update' if a potential remote <strong>BHive</strong> already has one of them.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_launcher_cli">Launcher CLI</h4>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 25%;">
<col style="width: 10%;">
<col style="width: 65%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Command</th>
<th class="tableblock halign-left valign-top">Remote</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>launcher</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">No</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Reads a given <code>.bdeploy</code> file, which describes all required information for the launcher to contact a <strong>BDeploy</strong> server and download a <em>client</em> application.</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect3">
<h4 id="_environment_variables">Environment Variables</h4>
<div class="paragraph">
<p><strong>BDeploy</strong> and <strong>BHive</strong> CLIs provide a set of environment variables that allow you to provide environment defaults for certain command line arguments.</p>
</div>
<div class="paragraph">
<p>Each command will include information for the according environment fallback in it&#8217;s help output, for instance:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">$ bhive push --help
Help:

Usage: PushTool &lt;args...&gt;
               --token=ARG: Token for the remote access. Can be given alternatively to a keystore.
                            (Environment variable 'BDEPLOY_TOKEN' is used as fallback if not given)
              --remote=ARG: URI of remote BHive. Supports file:, jar:file:, bhive:
                            (Environment variable 'BDEPLOY_REMOTE' is used as fallback if not given)
              ...</pre>
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 22.7272%;">
<col style="width: 77.2728%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Variable</th>
<th class="tableblock halign-left valign-top">Description</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BDEPLOY_LOGIN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Specifies the name of a stored login session (<code>bdeploy login</code>) to use. This overrides the currently active login session if there is one.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BDEPLOY_REMOTE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">URL to the remote <strong>BDeploy</strong> server which commands should connect to, e.g. <code><a href="https://hostname:7701/api" class="bare">https://hostname:7701/api</a></code>.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BDEPLOY_ROOT</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The root directory to use for <code>init</code>, <code>master</code> and <code>slave</code> (primarily).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BDEPLOY_TOKEN</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The actual <em>security token</em> used to access the remote <strong>BDeploy</strong> server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BDEPLOY_TOKENFILE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">A file containing the <em>security token</em> (as text content) used to access the remote <strong>BDeploy</strong> server.</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>BHIVE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Path to the <strong>BHive</strong> to operate on for local commands (e.g. <code>import</code>, <code>export</code>).</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>REMOTE_BHIVE</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">The name of the remote <strong>BHive</strong>. In case of <strong>BDeploy</strong> this is usually the name of an <strong>Instance Group</strong> or <strong>Software Repository</strong>.</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect2">
<h3 id="_security">Security</h3>
<div class="paragraph">
<p><strong>BDeploy</strong> uses HTTPS everywhere along with advanced <em>security tokens</em> which allow mutual authentication for every request. Think of it as a combination of <em>JWT</em> and mutual certificate based authentication.</p>
</div>
<div class="paragraph">
<p>This mechanism is used for <em>every</em> remote communication, especially for every remote communication which would cause a state change in <strong>BDeploy</strong>. There are some endpoints in the Web UI backend which must be unsecured by design (e.g. the one performing authentication and issuing the <em>security token</em> for all following remote communication).</p>
</div>
<div class="paragraph">
<p>As a consequence, a <em>security token</em> is required for all CLI commands that communicate with a remote <strong>BDeploy</strong> server, when registering a <em>slave</em> with a <em>master</em> minion (as they communicate), and for all toolings which communicate otherwise with <strong>BDeploy</strong> (e.g. build integrations which fetch dependencies and push <strong>Products</strong> to <strong>BDeploy</strong>).</p>
</div>
<div class="sect3">
<h4 id="_certificates">Certificates</h4>
<div class="paragraph">
<p><strong>BDeploy</strong> by default generates a self-signed certificate which is used to secure both the internal communication and the Web UI (HTTPS).</p>
</div>
<div class="paragraph">
<p>It is possible to exchange this certificate with a proper one if the security warning in the Web UI is undesirable.</p>
</div>
<div class="admonitionblock caution">
<table>
<tr>
<td class="icon">
<i class="fa icon-caution" title="Caution"></i>
</td>
<td class="content">
Exchanging the certificate will currently invalidate all issued <em>security tokens</em>. The ones issued to authenticated users, as well as the ones used to register <strong>BDeploy</strong> minions with other <strong>BDeploy</strong> servers.
</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
Current swapping is possible only manually, proper CLI support pending.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_endpoint_proxying">Endpoint Proxying</h3>
<div class="paragraph">
<p><strong>BDeploy</strong> supports proxying (tunnelling) to application endpoints as defined in the <a href="#_app_info_yaml">app-info.yaml</a>.</p>
</div>
<div class="paragraph">
<p>The application hosting the endpoint to call can be hosted on any slave in the system. As long as this slave is attached to a master you can reach (directly in <code>STANDALONE</code> or <code>MANAGED</code> mode, or indirectly in <code>CENTRAL</code> mode), you can tunnel there using <strong>BDeploy</strong>.</p>
</div>
<div class="paragraph">
<p>You will need these to be able to call an Endpoint of a remote application through the <strong>BDeploy</strong> public API:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A <strong>BDeploy</strong> <em>slim</em> token to be supplied for an authorization header in the form of <code>X-BDeploy-Authorization: Bearer &lt;TOKEN&gt;</code>. You can obtain this token from the Web UI for the logged in user.</p>
</li>
<li>
<p>The <code>id</code> of the instance group hosting the application you want to tunnel to.</p>
</li>
<li>
<p>The <code>uuid</code> of the instance hosting the application you want to tunnel to. You can see this id for instance from the browsers URL when on the instance overview page for the instance in question.</p>
</li>
<li>
<p>The <code>id</code> of the applications endpoint as defined in the <a href="#_app_info_yaml">app-info.yaml</a>.</p>
</li>
<li>
<p>The <code>uuid</code> of the application which hosts the endpoint identified by the endpoint <code>id</code> above.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>A typical proxy call using the public API would look like this, when using <strong>cURL</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="bash">curl -k -H "Accept: */*" \
    -H "X-BDeploy-Authorization: Bearer &lt;X&gt;" \ <i class="conum" data-value="1"></i><b>(1)</b>
    "https://server/api/public/v1/common/proxy/myEndpoint?BDeploy_group=MyGroup&amp;BDeploy_instance=xxxx-111-xxxx&amp;BDeploy_application=yyyy-111-yyyy" <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b> <i class="conum" data-value="4"></i><b>(4)</b> <i class="conum" data-value="5"></i><b>(5)</b> <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>&lt;X&gt;</strong> is a bearer token, which can be obtained from the Web UI (User drop-down menu).</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>server</strong> is the hostname (and port) of the <strong>BDeploy</strong> master. This may be either a <code>CENTRAL</code>, <code>MANAGED</code> or <code>STANDALONE</code> server, being in charge (directly or indirectly) of the application to tunnel to.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><strong>myEndpoint</strong> is the <code>id</code> of the endpoint to call as defined in the <a href="#_app_info_yaml">app-info.yaml</a> of the hosting application.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td><strong>MyGroup</strong> is the <code>id</code> of the instance group which hosts the application to tunnel to.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td><strong>xxxx-111-xxxx</strong> is the <code>uuid</code> of the instance which hosts the application to tunnel to.</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td><strong>yyyy-111-yyyy</strong> is the <code>uuid</code> of the application which hosts an endpoint with the given endpoint <code>id</code>.</td>
</tr>
</table>
</div>
<div class="sect3">
<h4 id="_how_to_obtain_required_ids">How to obtain required IDs</h4>
<div class="paragraph">
<p>There are two ways to obtain required IDs. You can use a pure manual approach and for instance deduce ID&#8217;s from URLs and the Web UI itself. Or you can use the public API to query <strong>BDeploy</strong> for available objects.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="nowrap">http://my-server/#/instance/overview/MyGroup/xxxx-111-xxxx</pre>
</div>
</div>
<div class="paragraph">
<p>From the above URL, you can find the instance group <code>id</code> (<strong>MyGroup</strong>) as well as the instance <code>uuid</code> (<strong>xxxx-111-xxxx</strong>). When on the instance overview page, click the server application you want to tunnel to. The process control panel for that application opens up, and you will see the applications <code>id</code> displayed right beneath its name.</p>
</div>
<div class="paragraph">
<p>Last thing to manually lookup is the endpoint <code>id</code>. Endpoints can be accessed in the process' context menu by choosing <span class="menuseq"><b class="menu">Context Menu</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Endpoints</b></span></p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_DnD_Applications.png"><img src="images/BDeploy_DnD_Applications.png" alt="Process Context Menu" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>You will be able to read the endpoint <code>id</code> and configure properties of the endpoint on this page. The configuration will be used by <strong>BDeploy</strong> when instructed remotely to call that endpoint. <strong>BDeploy</strong> will take care of things like authentication, security, etc. The actual caller will only require access (and permissions) on the master server he is calling into, not to the actual application. Instead, <strong>BDeploy</strong> itself is configured to be authorized to perform the call.</p>
</div>
<div class="imageblock text-center">
<div class="content">
<a class="image" href="images/BDeploy_Endpoints_Config.png"><img src="images/BDeploy_Endpoints_Config.png" alt="Process Endpoints Configuration" width="480"></a>
</div>
</div>
<div class="paragraph">
<p>For automatic lookup, you can use the following <strong>BDeploy</strong> public API endpoints. Those are provided by the master server, same as the actual proxy endpoint:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="prettyprint highlight nowrap"><code data-lang="bash"># will list instance groups
curl -k -H "Accept: application/json" \
    -H "X-BDeploy-Authorization: Bearer &lt;X&gt;" \ <i class="conum" data-value="1"></i><b>(1)</b>
    "https://server/api/public/v1/instanceGroups"

# will fetch the latest configuration of all instances in an instance group
curl -k -H "Accept: application/json" \
    -H "X-BDeploy-Authorization: Bearer &lt;X&gt;" \
    "https://server/api/public/v1/common/instances?BDeploy_group=MyGroup&amp;latest=true" <i class="conum" data-value="2"></i><b>(2)</b>

# will fetch all endpoints exposed by a certain instance along with the uuids of the applications hosting them.
curl -k -H "Accept: application/json" \
    -H "X-BDeploy-Authorization: Bearer &lt;X&gt;" \
    "https://server/api/public/v1/common/endpoints?BDeploy_group=MyGroup&amp;BDeploy_instance=xxxx-111-xxxx" <i class="conum" data-value="2"></i><b>(2)</b> <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td><strong>&lt;X&gt;</strong> in all the following <strong>cURL</strong> calls is the bearer token as obtained from the Web UI.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td><strong>MyGroup</strong> is the name of one of the instance groups as obtained by the first API. You can fetch the <code>uuid</code> of each instance from the returned JSON.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td><strong>xxxx-111-xxxx</strong> is the instance <code>uuid</code> as obtained by the last API. The returned JSON will include the application <code>uuid</code> hosting the endpoint along with the actual specific configuration of that endpoint (including its <code>id</code>).</td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_faq">FAQ</h2>
<div class="sectionbody">
<h3 id="_q_when_uploading_an_update_why_are_some_servers_not_updated" class="discrete">Q: When uploading an update, why are some servers not updated?</h3>
<div class="paragraph">
<p>There are a few reasons why an update could not be performed.</p>
</div>
<div class="paragraph">
<p>First, <strong>BDeploy</strong> packages are available for multiple operating systems. Since <strong>BDeploy</strong> fully supports multi-OS setups, you might have uploaded an update package only for one OS, and the servers which did not update correct run another OS. Please make sure to always upload all available OS packages of <strong>BDeploy</strong> to assure smooth updating.</p>
</div>
<div class="paragraph">
<p>Second, <strong>BDeploy</strong> packages might have a minimum required source server version. Since multi-node setups could in theory have heterogenous versions installed, this minimum server version is checked right before applying the update on this particular server, not centrally. This means that a server can refuse installing the update. You will find a hint in the logs of that server. The <strong>BDeploy</strong> release notes should contain further instructions in this case - most likely instructions to update to another version of <strong>BDeploy</strong> first.</p>
</div>
</div>
</div>
</div>
<div id="footer">
<div id="footer-text">
Version 2.5.0<br>
Last updated 2020-06-19 10:24:07 +0200
</div>
</div>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/prettify.min.css">
<script src="https://cdnjs.cloudflare.com/ajax/libs/prettify/r298/run_prettify.min.js"></script>
</body>
</html>